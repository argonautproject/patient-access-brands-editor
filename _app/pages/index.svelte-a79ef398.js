var Qe=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var Ue=(i,e,r)=>e in i?Qe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,fe=(i,e)=>{for(var r in e||(e={}))Ze.call(e,r)&&Ue(i,r,e[r]);if(Ee)for(var r of Ee(e))xe.call(e,r)&&Ue(i,r,e[r]);return i},_e=(i,e)=>Xe(i,Ye(e));import{D as et,S as we,i as ve,s as ge,L as tt,t as A,k as T,w as I,l as G,h as O,m as D,x as y,g,y as B,j as ne,n as te,o as b,p as re,q as h,d,B as E,M as Je,N as rt,O as ke,P as nt,e as N,c as P,a as V,b as S,Q as de,J as U,R as ue,T as he,U as be,V as Ie,f as j,W as lt,X as it,Y as ee,E as Te,Z as W,_ as st,$ as ae,a0 as K,a1 as Q,a2 as ye,a3 as at,a4 as ot,a5 as Be,a6 as ft,a7 as ut,a8 as De,v as pt,a9 as pe,aa as ct,K as mt,ab as Ae}from"../chunks/vendor-8fdeefa1.js";const se=et({id:null});function $t(i){var u,c,m,$,w,q;let e,r,t=(((c=(u=i[0])==null?void 0:u.portalInherit)!=null&&c.name?($=(m=i[1])==null?void 0:m.portal)==null?void 0:$.name:(q=(w=i[0])==null?void 0:w.portal)==null?void 0:q.name)||"TODO: Add portal name, URL, and description")+"",n,a,l,s,o,f,p;return{c(){e=N("div"),r=N("p"),n=A(t),a=T(),l=N("button"),s=A("View data"),o=T(),f=N("button"),p=A("Connect"),this.h()},l(R){e=P(R,"DIV",{style:!0});var z=V(e);r=P(z,"P",{style:!0});var J=V(r);n=O(J,t),J.forEach(d),a=D(z),l=P(z,"BUTTON",{class:!0,kind:!0});var H=V(l);s=O(H,"View data"),H.forEach(d),o=D(z),f=P(z,"BUTTON",{class:!0,kind:!0});var L=V(f);p=O(L,"Connect"),L.forEach(d),z.forEach(d),this.h()},h(){j(r,"font-size",".8rem"),j(r,"margin-top",".5em"),S(l,"class","example svelte-1g6h6zr"),S(l,"kind","primary"),S(f,"class","example svelte-1g6h6zr"),S(f,"kind","primary"),j(e,"margin-left","1em"),j(e,"margin-right","1em"),j(e,"display","flex"),j(e,"align-items","self-end")},m(R,z){g(R,e,z),U(e,r),U(r,n),U(e,a),U(e,l),U(l,s),U(e,o),U(e,f),U(f,p)},p(R,z){var J,H,L,Y,F,Z;z&3&&t!==(t=(((H=(J=R[0])==null?void 0:J.portalInherit)!=null&&H.name?(Y=(L=R[1])==null?void 0:L.portal)==null?void 0:Y.name:(Z=(F=R[0])==null?void 0:F.portal)==null?void 0:Z.name)||"TODO: Add portal name, URL, and description")+"")&&ne(n,t)},d(R){R&&d(e)}}}function _t(i){let e,r;return e=new he({props:{$$slots:{default:[$t]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&259&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function dt(i){let e,r,t,n,a=i[0].name+"",l,s,o,f,p,u,c;return f=new ke({props:{noGutter:!0,$$slots:{default:[_t]},$$scope:{ctx:i}}}),u=new nt({props:{style:"cursor: pointer; position: absolute; top: 0%; right: 0%;"}}),u.$on("click",i[4]),{c(){e=N("h3"),r=N("img"),n=T(),l=A(a),s=A(`
    \xA0`),o=T(),I(f.$$.fragment),p=T(),I(u.$$.fragment),this.h()},l(m){e=P(m,"H3",{class:!0});var $=V(e);r=P($,"IMG",{alt:!0,class:!0,src:!0}),n=D($),l=O($,a),s=O($,`
    \xA0`),$.forEach(d),o=D(m),y(f.$$.fragment,m),p=D(m),y(u.$$.fragment,m),this.h()},h(){var m;S(r,"alt","logo"),S(r,"class","logo svelte-1g6h6zr"),de(r.src,t=(m=i[0].logo)!=null?m:"smart-burst.svg")||S(r,"src",t),S(e,"class","name svelte-1g6h6zr")},m(m,$){g(m,e,$),U(e,r),U(e,n),U(e,l),U(e,s),g(m,o,$),B(f,m,$),g(m,p,$),B(u,m,$),c=!0},p(m,$){var q;(!c||$&1&&!de(r.src,t=(q=m[0].logo)!=null?q:"smart-burst.svg"))&&S(r,"src",t),(!c||$&1)&&a!==(a=m[0].name+"")&&ne(l,a);const w={};$&259&&(w.$$scope={dirty:$,ctx:m}),f.$set(w)},i(m){c||(h(f.$$.fragment,m),h(u.$$.fragment,m),c=!0)},o(m){b(f.$$.fragment,m),b(u.$$.fragment,m),c=!1},d(m){m&&d(e),m&&d(o),E(f,m),m&&d(p),E(u,m)}}}function ht(i){let e,r;return e=new be({props:{small:!0,style:"display: flex; align-items: centered; padding-left: 1em; padding-right: 1em; width: 100%; max-width: unset; min-height: 2rem; gap: 1em;",kind:"danger-tertiary",$$slots:{default:[bt]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&256&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function gt(i){let e,r;return e=new be({props:{small:!0,style:"display: flex; align-items: centered; padding-left: 1em; padding-right: 1em; width: 100%; max-width: unset; min-height: 2rem; gap: 1em;",kind:"tertiary",$$slots:{default:[wt]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&256&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function bt(i){let e,r,t,n,a;return e=new Ie({}),{c(){I(e.$$.fragment),r=T(),t=N("div"),n=A("Remove affiliated brand"),this.h()},l(l){y(e.$$.fragment,l),r=D(l),t=P(l,"DIV",{style:!0});var s=V(t);n=O(s,"Remove affiliated brand"),s.forEach(d),this.h()},h(){j(t,"flex-grow","1")},m(l,s){B(e,l,s),g(l,r,s),g(l,t,s),U(t,n),a=!0},i(l){a||(h(e.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),a=!1},d(l){E(e,l),l&&d(r),l&&d(t)}}}function wt(i){let e,r,t,n,a;return e=new lt({}),{c(){I(e.$$.fragment),r=T(),t=N("div"),n=A("Add affiliated brand"),this.h()},l(l){y(e.$$.fragment,l),r=D(l),t=P(l,"DIV",{style:!0});var s=V(t);n=O(s,"Add affiliated brand"),s.forEach(d),this.h()},h(){j(t,"flex-grow","1")},m(l,s){B(e,l,s),g(l,r,s),g(l,t,s),U(t,n),a=!0},i(l){a||(h(e.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),a=!1},d(l){E(e,l),l&&d(r),l&&d(t)}}}function vt(i){var m;let e="",r,t,n,a,l,s,o,f;n=new tt({props:{class:"tile",style:`opacity: ${((m=i[2])==null?void 0:m.id)!==null&&i[2].id!==i[0].id?"50":100}%`,$$slots:{default:[dt]},$$scope:{ctx:i}}}),n.$on("click",i[5]);const p=[gt,ht],u=[];function c($,w){return $[0].parentId?1:0}return l=c(i),s=u[l]=p[l](i),{c(){r=A(e),t=T(),I(n.$$.fragment),a=T(),s.c(),o=G()},l($){r=O($,e),t=D($),y(n.$$.fragment,$),a=D($),s.l($),o=G()},m($,w){g($,r,w),g($,t,w),B(n,$,w),g($,a,w),u[l].m($,w),g($,o,w),f=!0},p($,[w]){var z;(!f||w&1)&&e!==(e="")&&ne(r,e);const q={};w&5&&(q.style=`opacity: ${((z=$[2])==null?void 0:z.id)!==null&&$[2].id!==$[0].id?"50":100}%`),w&263&&(q.$$scope={dirty:w,ctx:$}),n.$set(q);let R=l;l=c($),l===R?u[l].p($,w):(te(),b(u[R],1,1,()=>{u[R]=null}),re(),s=u[l],s?s.p($,w):(s=u[l]=p[l]($),s.c()),h(s,1),s.m(o.parentNode,o))},i($){f||(h(n.$$.fragment,$),h(s),f=!0)},o($){b(n.$$.fragment,$),b(s),f=!1},d($){$&&d(r),$&&d(t),E(n,$),$&&d(a),u[l].d($),$&&d(o)}}}function kt(i,e,r){let t;Je(i,se,u=>r(2,t=u));const n=rt();let{brand:a}=e,{parentBrand:l}=e;const s=()=>{ue(se,t={id:a.id},t),console.log("Editing",a.id)},o=()=>{ue(se,t={id:a.id},t),console.log("Editing",a.id)},f=()=>{n("add-affiliated-brand",a)},p=()=>{n("remove-affiliated-brand",a)};return i.$$set=u=>{"brand"in u&&r(0,a=u.brand),"parentBrand"in u&&r(1,l=u.parentBrand)},[a,l,t,n,s,o,f,p]}class It extends we{constructor(e){super();ve(this,e,kt,vt,ge,{brand:0,parentBrand:1})}}const{Boolean:Ke}=ft;function Oe(i,e,r){const t=i.slice();return t[28]=e[r],t[29]=e,t[30]=r,t}function Ne(i,e,r){const t=i.slice();return t[31]=e[r],t[32]=e,t[30]=r,t}function Pe(i){let e,r;return e=new it({props:{$$slots:{default:[Rt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n[0]&63|n[1]&4&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function yt(i){let e,r,t,n,a,l;function s(f){i[9](f)}let o={autofocus:!0,invalid:i[0].name=="",placeholder:"Associated Physicians of Madison"};return i[0].name!==void 0&&(o.value=i[0].name),n=new ae({props:o}),W.push(()=>K(n,"value",s)),{c(){e=N("div"),r=A("The primary name associated with your brand."),t=T(),I(n.$$.fragment),this.h()},l(f){e=P(f,"DIV",{class:!0});var p=V(e);r=O(p,"The primary name associated with your brand."),p.forEach(d),t=D(f),y(n.$$.fragment,f),this.h()},h(){S(e,"class","bx--form__helper-text")},m(f,p){g(f,e,p),U(e,r),g(f,t,p),B(n,f,p),l=!0},p(f,p){const u={};p[0]&1&&(u.invalid=f[0].name==""),!a&&p[0]&1&&(a=!0,u.value=f[0].name,Q(()=>a=!1)),n.$set(u)},i(f){l||(h(n.$$.fragment,f),l=!0)},o(f){b(n.$$.fragment,f),l=!1},d(f){f&&d(e),f&&d(t),E(n,f)}}}function Bt(i){var f,p;let e,r,t,n,a,l;function s(u){i[10](u)}let o={invalid:!((p=(f=i[0])==null?void 0:f.website)!=null&&p.startsWith("https://")),placeholder:"https://apmadison.com"};return i[0].website!==void 0&&(o.value=i[0].website),n=new ae({props:o}),W.push(()=>K(n,"value",s)),{c(){e=N("div"),r=A(`The primary website associated with your brand. Note: this is distinct
        from your patient portal.`),t=T(),I(n.$$.fragment),this.h()},l(u){e=P(u,"DIV",{class:!0});var c=V(e);r=O(c,`The primary website associated with your brand. Note: this is distinct
        from your patient portal.`),c.forEach(d),t=D(u),y(n.$$.fragment,u),this.h()},h(){S(e,"class","bx--form__helper-text")},m(u,c){g(u,e,c),U(e,r),g(u,t,c),B(n,u,c),l=!0},p(u,c){var $,w;const m={};c[0]&1&&(m.invalid=!((w=($=u[0])==null?void 0:$.website)!=null&&w.startsWith("https://"))),!a&&c[0]&1&&(a=!0,m.value=u[0].website,Q(()=>a=!1)),n.$set(m)},i(u){l||(h(n.$$.fragment,u),l=!0)},o(u){b(n.$$.fragment,u),l=!1},d(u){u&&d(e),u&&d(t),E(n,u)}}}function Ce(i){let e,r,t,n,a,l,s;function o(c){i[11](c,i[30])}function f(c){i[12](c,i[30])}let p={invalid:i[0].alias[i[30]]=="",style:"width: 100%;",placeholder:"Madison Doctors Group"};i[0].alias[i[30]]!==void 0&&(p.value=i[0].alias[i[30]]),i[3][i[30]]!==void 0&&(p.ref=i[3][i[30]]),r=new ae({props:p}),W.push(()=>K(r,"value",o)),W.push(()=>K(r,"ref",f)),r.$on("keyup",i[13]);function u(){return i[14](i[30])}return l=new Ie({props:{style:"margin-left: .5em; cursor: pointer; min-width: 16px;"}}),l.$on("click",u),{c(){e=N("div"),I(r.$$.fragment),a=T(),I(l.$$.fragment),this.h()},l(c){e=P(c,"DIV",{style:!0});var m=V(e);y(r.$$.fragment,m),a=D(m),y(l.$$.fragment,m),m.forEach(d),this.h()},h(){j(e,"display","flex"),j(e,"align-items","baseline")},m(c,m){g(c,e,m),B(r,e,null),U(e,a),B(l,e,null),s=!0},p(c,m){i=c;const $={};m[0]&1&&($.invalid=i[0].alias[i[30]]==""),!t&&m[0]&1&&(t=!0,$.value=i[0].alias[i[30]],Q(()=>t=!1)),!n&&m[0]&8&&(n=!0,$.ref=i[3][i[30]],Q(()=>n=!1)),r.$set($)},i(c){s||(h(r.$$.fragment,c),h(l.$$.fragment,c),s=!0)},o(c){b(r.$$.fragment,c),b(l.$$.fragment,c),s=!1},d(c){c&&d(e),E(r),E(l)}}}function Et(i){let e;return{c(){e=A("Add alias")},l(r){e=O(r,"Add alias")},m(r,t){g(r,e,t)},d(r){r&&d(e)}}}function Ut(i){var p;let e,r,t,n,a,l,s=((p=i[0])==null?void 0:p.alias)||[],o=[];for(let u=0;u<s.length;u+=1)o[u]=Ce(Ne(i,s,u));const f=u=>b(o[u],1,1,()=>{o[u]=null});return a=new be({props:{small:!0,kind:"ghost",$$slots:{default:[Et]},$$scope:{ctx:i}}}),a.$on("click",i[6]),{c(){e=N("div"),r=A(`An alias associated with your Brand (e.g., a former name or other term
        patients might use to search for your brand)`),t=T();for(let u=0;u<o.length;u+=1)o[u].c();n=T(),I(a.$$.fragment),this.h()},l(u){e=P(u,"DIV",{class:!0});var c=V(e);r=O(c,`An alias associated with your Brand (e.g., a former name or other term
        patients might use to search for your brand)`),c.forEach(d),t=D(u);for(let m=0;m<o.length;m+=1)o[m].l(u);n=D(u),y(a.$$.fragment,u),this.h()},h(){S(e,"class","bx--form__helper-text")},m(u,c){g(u,e,c),U(e,r),g(u,t,c);for(let m=0;m<o.length;m+=1)o[m].m(u,c);g(u,n,c),B(a,u,c),l=!0},p(u,c){var $;if(c[0]&73){s=(($=u[0])==null?void 0:$.alias)||[];let w;for(w=0;w<s.length;w+=1){const q=Ne(u,s,w);o[w]?(o[w].p(q,c),h(o[w],1)):(o[w]=Ce(q),o[w].c(),h(o[w],1),o[w].m(n.parentNode,n))}for(te(),w=s.length;w<o.length;w+=1)f(w);re()}const m={};c[1]&4&&(m.$$scope={dirty:c,ctx:u}),a.$set(m)},i(u){if(!l){for(let c=0;c<s.length;c+=1)h(o[c]);h(a.$$.fragment,u),l=!0}},o(u){o=o.filter(Ke);for(let c=0;c<o.length;c+=1)b(o[c]);b(a.$$.fragment,u),l=!1},d(u){u&&d(e),u&&d(t),ye(o,u),u&&d(n),E(a,u)}}}function Re(i){let e,r;return{c(){e=N("img"),this.h()},l(t){e=P(t,"IMG",{style:!0,alt:!0,src:!0}),this.h()},h(){j(e,"width","1em"),j(e,"height","1em"),S(e,"alt","logo"),de(e.src,r=i[0].logo)||S(e,"src",r)},m(t,n){g(t,e,n)},p(t,n){n[0]&1&&!de(e.src,r=t[0].logo)&&S(e,"src",r)},d(t){t&&d(e)}}}function Tt(i){let e,r,t,n=i[0].logo&&Re(i),a={buttonLabel:"Choose logo file",labelDescription:"Square PNG or SVG, 1024x1024 pixels with transparent background preferred",accept:[".png",".svg"],status:"complete"};return r=new at({props:a}),i[15](r),r.$on("change",i[16]),{c(){n&&n.c(),e=T(),I(r.$$.fragment)},l(l){n&&n.l(l),e=D(l),y(r.$$.fragment,l)},m(l,s){n&&n.m(l,s),g(l,e,s),B(r,l,s),t=!0},p(l,s){l[0].logo?n?n.p(l,s):(n=Re(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null);const o={};r.$set(o)},i(l){t||(h(r.$$.fragment,l),t=!0)},o(l){b(r.$$.fragment,l),t=!1},d(l){n&&n.d(l),l&&d(e),i[15](null),E(r,l)}}}function Se(i){let e,r,t,n,a,l,s;function o(c){i[17](c,i[28])}function f(c){i[18](c,i[30])}let p={invalid:Object.entries(i[0].locations[i[30]]).length===1,style:"width: 100%;",placeholder:"123 Regent St, Madison, WI 53726"};i[28].text!==void 0&&(p.value=i[28].text),i[4][i[30]]!==void 0&&(p.ref=i[4][i[30]]),r=new ae({props:p}),W.push(()=>K(r,"value",o)),W.push(()=>K(r,"ref",f)),r.$on("keyup",i[19]);function u(){return i[20](i[30])}return l=new Ie({props:{style:"margin-left: .5em; cursor: pointer; min-width: 16px;"}}),l.$on("click",u),{c(){e=N("div"),I(r.$$.fragment),a=T(),I(l.$$.fragment),this.h()},l(c){e=P(c,"DIV",{style:!0});var m=V(e);y(r.$$.fragment,m),a=D(m),y(l.$$.fragment,m),m.forEach(d),this.h()},h(){j(e,"display","flex"),j(e,"align-items","baseline")},m(c,m){g(c,e,m),B(r,e,null),U(e,a),B(l,e,null),s=!0},p(c,m){i=c;const $={};m[0]&1&&($.invalid=Object.entries(i[0].locations[i[30]]).length===1),!t&&m[0]&1&&(t=!0,$.value=i[28].text,Q(()=>t=!1)),!n&&m[0]&16&&(n=!0,$.ref=i[4][i[30]],Q(()=>n=!1)),r.$set($)},i(c){s||(h(r.$$.fragment,c),h(l.$$.fragment,c),s=!0)},o(c){b(r.$$.fragment,c),b(l.$$.fragment,c),s=!1},d(c){c&&d(e),E(r),E(l)}}}function Dt(i){let e;return{c(){e=A("Add location")},l(r){e=O(r,"Add location")},m(r,t){g(r,e,t)},d(r){r&&d(e)}}}function At(i){let e,r,t,n,a,l,s=i[0].locations||[],o=[];for(let p=0;p<s.length;p+=1)o[p]=Se(Oe(i,s,p));const f=p=>b(o[p],1,1,()=>{o[p]=null});return a=new be({props:{small:!0,kind:"ghost",$$slots:{default:[Dt]},$$scope:{ctx:i}}}),a.$on("click",i[7]),{c(){e=N("div"),r=A(`A location (street address, city/state, or city/state/zip) associated
        with your Brand`),t=T();for(let p=0;p<o.length;p+=1)o[p].c();n=T(),I(a.$$.fragment),this.h()},l(p){e=P(p,"DIV",{class:!0});var u=V(e);r=O(u,`A location (street address, city/state, or city/state/zip) associated
        with your Brand`),u.forEach(d),t=D(p);for(let c=0;c<o.length;c+=1)o[c].l(p);n=D(p),y(a.$$.fragment,p),this.h()},h(){S(e,"class","bx--form__helper-text")},m(p,u){g(p,e,u),U(e,r),g(p,t,u);for(let c=0;c<o.length;c+=1)o[c].m(p,u);g(p,n,u),B(a,p,u),l=!0},p(p,u){if(u[0]&145){s=p[0].locations||[];let m;for(m=0;m<s.length;m+=1){const $=Oe(p,s,m);o[m]?(o[m].p($,u),h(o[m],1)):(o[m]=Se($),o[m].c(),h(o[m],1),o[m].m(n.parentNode,n))}for(te(),m=s.length;m<o.length;m+=1)f(m);re()}const c={};u[1]&4&&(c.$$scope={dirty:u,ctx:p}),a.$set(c)},i(p){if(!l){for(let u=0;u<s.length;u+=1)h(o[u]);h(a.$$.fragment,p),l=!0}},o(p){o=o.filter(Ke);for(let u=0;u<o.length;u+=1)b(o[u]);b(a.$$.fragment,p),l=!1},d(p){p&&d(e),p&&d(t),ye(o,p),p&&d(n),E(a,p)}}}function Ot(i){let e,r,t;function n(l){i[21](l)}let a={label:"Select categories",items:[{id:"outpatient",text:"Outpatient (clinic, office)"},{id:"hospital",text:"Hospital"},{id:"health-system",text:"Health system"},{id:"lab",text:"Lab"},{id:"pharmacy",text:"Pharmacy"},{id:"insurer",text:"Insurer"},{id:"network",text:"Data Network"},{id:"aggregator",text:"Data Aggregator"}]};return i[0].categories!==void 0&&(a.selectedIds=i[0].categories),e=new ot({props:a}),W.push(()=>K(e,"selectedIds",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const o={};!r&&s[0]&1&&(r=!0,o.selectedIds=l[0].categories,Q(()=>r=!1)),e.$set(o)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function Ve(i){var f,p;let e,r,t,n=(((p=(f=i[5])==null?void 0:f.portal)==null?void 0:p.website)||"")+"",a,l,s,o;return{c(){e=N("div"),r=N("input"),t=A(`
          Use portal URL from Primary Brand ("`),a=A(n),l=A('")'),this.h()},l(u){e=P(u,"DIV",{});var c=V(e);r=P(c,"INPUT",{type:!0}),t=O(c,`
          Use portal URL from Primary Brand ("`),a=O(c,n),l=O(c,'")'),c.forEach(d),this.h()},h(){S(r,"type","checkbox")},m(u,c){g(u,e,c),U(e,r),r.checked=i[0].portalInherit.website,U(e,t),U(e,a),U(e,l),s||(o=Be(r,"change",i[22]),s=!0)},p(u,c){var m,$;c[0]&1&&(r.checked=u[0].portalInherit.website),c[0]&32&&n!==(n=((($=(m=u[5])==null?void 0:m.portal)==null?void 0:$.website)||"")+"")&&ne(a,n)},d(u){u&&d(e),s=!1,o()}}}function qe(i){var l,s,o;let e,r,t;function n(f){i[23](f)}let a={invalid:!((o=(s=(l=i[0])==null?void 0:l.portal)==null?void 0:s.website)!=null&&o.startsWith("https://")),placeholder:"https://www.chart.myunitypoint.org/"};return i[0].portal.website!==void 0&&(a.value=i[0].portal.website),e=new ae({props:a}),W.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(f){y(e.$$.fragment,f)},m(f,p){B(e,f,p),t=!0},p(f,p){var c,m,$;const u={};p[0]&1&&(u.invalid=!(($=(m=(c=f[0])==null?void 0:c.portal)==null?void 0:m.website)!=null&&$.startsWith("https://"))),!r&&p[0]&1&&(r=!0,u.value=f[0].portal.website,Q(()=>r=!1)),e.$set(u)},i(f){t||(h(e.$$.fragment,f),t=!0)},o(f){b(e.$$.fragment,f),t=!1},d(f){E(e,f)}}}function Nt(i){let e,r,t,n,a,l,s=i[1]&&Ve(i),o=(!i[1]||!i[0].portalInherit.website)&&qe(i);return{c(){e=N("div"),r=A("URL of patient portal where records are available (https only)"),t=T(),s&&s.c(),n=T(),o&&o.c(),a=G(),this.h()},l(f){e=P(f,"DIV",{class:!0});var p=V(e);r=O(p,"URL of patient portal where records are available (https only)"),p.forEach(d),t=D(f),s&&s.l(f),n=D(f),o&&o.l(f),a=G(),this.h()},h(){S(e,"class","bx--form__helper-text")},m(f,p){g(f,e,p),U(e,r),g(f,t,p),s&&s.m(f,p),g(f,n,p),o&&o.m(f,p),g(f,a,p),l=!0},p(f,p){f[1]?s?s.p(f,p):(s=Ve(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.website?o?(o.p(f,p),p[0]&3&&h(o,1)):(o=qe(f),o.c(),h(o,1),o.m(a.parentNode,a)):o&&(te(),b(o,1,1,()=>{o=null}),re())},i(f){l||(h(o),l=!0)},o(f){b(o),l=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),o&&o.d(f),f&&d(a)}}}function ze(i){var f,p;let e,r,t,n=(((p=(f=i[5])==null?void 0:f.portal)==null?void 0:p.name)||"")+"",a,l,s,o;return{c(){e=N("div"),r=N("input"),t=A(` Use
          name from Primary Brand ("`),a=A(n),l=A('")'),this.h()},l(u){e=P(u,"DIV",{});var c=V(e);r=P(c,"INPUT",{type:!0}),t=O(c,` Use
          name from Primary Brand ("`),a=O(c,n),l=O(c,'")'),c.forEach(d),this.h()},h(){S(r,"type","checkbox")},m(u,c){g(u,e,c),U(e,r),r.checked=i[0].portalInherit.name,U(e,t),U(e,a),U(e,l),s||(o=Be(r,"change",i[24]),s=!0)},p(u,c){var m,$;c[0]&1&&(r.checked=u[0].portalInherit.name),c[0]&32&&n!==(n=((($=(m=u[5])==null?void 0:m.portal)==null?void 0:$.name)||"")+"")&&ne(a,n)},d(u){u&&d(e),s=!1,o()}}}function Le(i){let e,r,t;function n(l){i[25](l)}let a={invalid:!1,placeholder:"MyUnityPoint"};return i[0].portal.name!==void 0&&(a.value=i[0].portal.name),e=new ae({props:a}),W.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const o={};s[0]&1&&(o.invalid=!1),!r&&s[0]&1&&(r=!0,o.value=l[0].portal.name,Q(()=>r=!1)),e.$set(o)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function Pt(i){let e,r,t,n,a,l,s=i[1]&&ze(i),o=(!i[1]||!i[0].portalInherit.name)&&Le(i);return{c(){e=N("div"),r=A("Name of the portal as known to patients"),t=T(),s&&s.c(),n=T(),o&&o.c(),a=G(),this.h()},l(f){e=P(f,"DIV",{class:!0});var p=V(e);r=O(p,"Name of the portal as known to patients"),p.forEach(d),t=D(f),s&&s.l(f),n=D(f),o&&o.l(f),a=G(),this.h()},h(){S(e,"class","bx--form__helper-text")},m(f,p){g(f,e,p),U(e,r),g(f,t,p),s&&s.m(f,p),g(f,n,p),o&&o.m(f,p),g(f,a,p),l=!0},p(f,p){f[1]?s?s.p(f,p):(s=ze(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.name?o?(o.p(f,p),p[0]&3&&h(o,1)):(o=Le(f),o.c(),h(o,1),o.m(a.parentNode,a)):o&&(te(),b(o,1,1,()=>{o=null}),re())},i(f){l||(h(o),l=!0)},o(f){b(o),l=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),o&&o.d(f),f&&d(a)}}}function je(i){var f,p;let e,r,t,n=(p=(f=i[5])==null?void 0:f.portal)!=null&&p.description?i[5].portal.description.slice(40)+"...":"",a,l,s,o;return{c(){e=N("div"),r=N("input"),t=A(`
          Use description from Primary Brand ("`),a=A(n),l=A('")'),this.h()},l(u){e=P(u,"DIV",{});var c=V(e);r=P(c,"INPUT",{type:!0}),t=O(c,`
          Use description from Primary Brand ("`),a=O(c,n),l=O(c,'")'),c.forEach(d),this.h()},h(){S(r,"type","checkbox")},m(u,c){g(u,e,c),U(e,r),r.checked=i[0].portalInherit.description,U(e,t),U(e,a),U(e,l),s||(o=Be(r,"change",i[26]),s=!0)},p(u,c){var m,$;c[0]&1&&(r.checked=u[0].portalInherit.description),c[0]&32&&n!==(n=($=(m=u[5])==null?void 0:m.portal)!=null&&$.description?u[5].portal.description.slice(40)+"...":"")&&ne(a,n)},d(u){u&&d(e),s=!1,o()}}}function Me(i){let e,r,t;function n(l){i[27](l)}let a={invalid:!1,placeholder:"Access your clinical records..."};return i[0].portal.description!==void 0&&(a.value=i[0].portal.description),e=new ae({props:a}),W.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const o={};s[0]&1&&(o.invalid=!1),!r&&s[0]&1&&(r=!0,o.value=l[0].portal.description,Q(()=>r=!1)),e.$set(o)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function Ct(i){let e,r,t,n,a,l,s=i[1]&&je(i),o=(!i[1]||!i[0].portalInherit.description)&&Me(i);return{c(){e=N("div"),r=A(`Description of the portal to help patients connect to the right place.
        Explain the intended audience of the portal, if you offer more than one
        portal for different audiences.`),t=T(),s&&s.c(),n=T(),o&&o.c(),a=G(),this.h()},l(f){e=P(f,"DIV",{class:!0});var p=V(e);r=O(p,`Description of the portal to help patients connect to the right place.
        Explain the intended audience of the portal, if you offer more than one
        portal for different audiences.`),p.forEach(d),t=D(f),s&&s.l(f),n=D(f),o&&o.l(f),a=G(),this.h()},h(){S(e,"class","bx--form__helper-text")},m(f,p){g(f,e,p),U(e,r),g(f,t,p),s&&s.m(f,p),g(f,n,p),o&&o.m(f,p),g(f,a,p),l=!0},p(f,p){f[1]?s?s.p(f,p):(s=je(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.description?o?(o.p(f,p),p[0]&3&&h(o,1)):(o=Me(f),o.c(),h(o,1),o.m(a.parentNode,a)):o&&(te(),b(o,1,1,()=>{o=null}),re())},i(f){l||(h(o),l=!0)},o(f){b(o),l=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),o&&o.d(f),f&&d(a)}}}function Rt(i){let e,r=`${i[1]?"Affiliated":"Primary"} Brand Details`,t,n,a,l,s,o,f,p,u,c,m,$,w,q,R,z="Patient Portal Details",J,H,L,Y,F,Z,X,le;return a=new ee({props:{legendText:"Brand name",$$slots:{default:[yt]},$$scope:{ctx:i}}}),s=new ee({props:{legendText:"Brand website (https only)",$$slots:{default:[Bt]},$$scope:{ctx:i}}}),f=new ee({props:{legendText:"Brand aliases (optional)",$$slots:{default:[Ut]},$$scope:{ctx:i}}}),u=new ee({props:{legendText:"Brand logo",$$slots:{default:[Tt]},$$scope:{ctx:i}}}),m=new ee({props:{legendText:"Locations (optional)",$$slots:{default:[At]},$$scope:{ctx:i}}}),w=new ee({props:{legendText:"Categories (optional)",$$slots:{default:[Ot]},$$scope:{ctx:i}}}),L=new ee({props:{legendText:"Portal URL",$$slots:{default:[Nt]},$$scope:{ctx:i}}}),F=new ee({props:{legendText:"Portal name",$$slots:{default:[Pt]},$$scope:{ctx:i}}}),X=new ee({props:{legendText:"Portal description",$$slots:{default:[Ct]},$$scope:{ctx:i}}}),{c(){e=N("h5"),t=A(r),n=T(),I(a.$$.fragment),l=T(),I(s.$$.fragment),o=T(),I(f.$$.fragment),p=T(),I(u.$$.fragment),c=T(),I(m.$$.fragment),$=T(),I(w.$$.fragment),q=T(),R=N("h5"),J=A(z),H=T(),I(L.$$.fragment),Y=T(),I(F.$$.fragment),Z=T(),I(X.$$.fragment)},l(_){e=P(_,"H5",{});var v=V(e);t=O(v,r),v.forEach(d),n=D(_),y(a.$$.fragment,_),l=D(_),y(s.$$.fragment,_),o=D(_),y(f.$$.fragment,_),p=D(_),y(u.$$.fragment,_),c=D(_),y(m.$$.fragment,_),$=D(_),y(w.$$.fragment,_),q=D(_),R=P(_,"H5",{});var ie=V(R);J=O(ie,z),ie.forEach(d),H=D(_),y(L.$$.fragment,_),Y=D(_),y(F.$$.fragment,_),Z=D(_),y(X.$$.fragment,_)},m(_,v){g(_,e,v),U(e,t),g(_,n,v),B(a,_,v),g(_,l,v),B(s,_,v),g(_,o,v),B(f,_,v),g(_,p,v),B(u,_,v),g(_,c,v),B(m,_,v),g(_,$,v),B(w,_,v),g(_,q,v),g(_,R,v),U(R,J),g(_,H,v),B(L,_,v),g(_,Y,v),B(F,_,v),g(_,Z,v),B(X,_,v),le=!0},p(_,v){(!le||v[0]&2)&&r!==(r=`${_[1]?"Affiliated":"Primary"} Brand Details`)&&ne(t,r);const ie={};v[0]&1|v[1]&4&&(ie.$$scope={dirty:v,ctx:_}),a.$set(ie);const ce={};v[0]&1|v[1]&4&&(ce.$$scope={dirty:v,ctx:_}),s.$set(ce);const k={};v[0]&9|v[1]&4&&(k.$$scope={dirty:v,ctx:_}),f.$set(k);const C={};v[0]&5|v[1]&4&&(C.$$scope={dirty:v,ctx:_}),u.$set(C);const M={};v[0]&17|v[1]&4&&(M.$$scope={dirty:v,ctx:_}),m.$set(M);const x={};v[0]&1|v[1]&4&&(x.$$scope={dirty:v,ctx:_}),w.$set(x);const me={};v[0]&35|v[1]&4&&(me.$$scope={dirty:v,ctx:_}),L.$set(me);const $e={};v[0]&35|v[1]&4&&($e.$$scope={dirty:v,ctx:_}),F.$set($e);const oe={};v[0]&35|v[1]&4&&(oe.$$scope={dirty:v,ctx:_}),X.$set(oe)},i(_){le||(h(a.$$.fragment,_),h(s.$$.fragment,_),h(f.$$.fragment,_),h(u.$$.fragment,_),h(m.$$.fragment,_),h(w.$$.fragment,_),h(L.$$.fragment,_),h(F.$$.fragment,_),h(X.$$.fragment,_),le=!0)},o(_){b(a.$$.fragment,_),b(s.$$.fragment,_),b(f.$$.fragment,_),b(u.$$.fragment,_),b(m.$$.fragment,_),b(w.$$.fragment,_),b(L.$$.fragment,_),b(F.$$.fragment,_),b(X.$$.fragment,_),le=!1},d(_){_&&d(e),_&&d(n),E(a,_),_&&d(l),E(s,_),_&&d(o),E(f,_),_&&d(p),E(u,_),_&&d(c),E(m,_),_&&d($),E(w,_),_&&d(q),_&&d(R),_&&d(H),E(L,_),_&&d(Y),E(F,_),_&&d(Z),E(X,_)}}}function St(i){let e,r,t=i[0]&&Pe(i);return{c(){t&&t.c(),e=G()},l(n){t&&t.l(n),e=G()},m(n,a){t&&t.m(n,a),g(n,e,a),r=!0},p(n,a){n[0]?t?(t.p(n,a),a[0]&1&&h(t,1)):(t=Pe(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(te(),b(t,1,1,()=>{t=null}),re())},i(n){r||(h(t),r=!0)},o(n){b(t),r=!1},d(n){t&&t.d(n),n&&d(e)}}}function Vt(i,e,r){let{brand:t}=e,{brands:n}=e,a,l=[],s=[],o=!1,f;async function p(){r(0,t.alias=t.alias||[],t).push(""),await Te(),l.slice(-1)[0].focus()}async function u(){r(0,t.locations=[...t.locations,{text:""}],t),await Te(),s.slice(-1)[0].focus()}function c(k){i.$$.not_equal(t.name,k)&&(t.name=k,r(0,t),r(8,n),r(1,o))}function m(k){i.$$.not_equal(t.website,k)&&(t.website=k,r(0,t),r(8,n),r(1,o))}function $(k,C){i.$$.not_equal(t.alias[C],k)&&(t.alias[C]=k,r(0,t),r(8,n),r(1,o))}function w(k,C){i.$$.not_equal(l[C],k)&&(l[C]=k,r(3,l))}const q=async k=>{k.key==="Enter"&&p()},R=k=>r(0,t.alias=t.alias.filter((C,M)=>M!==k),t);function z(k){W[k?"unshift":"push"](()=>{a=k,r(2,a)})}const J=async function(C){console.log(C.detail);const M=C.detail[0],x=new Uint8Array(await M.arrayBuffer());console.log(x);const me=st(x);let $e=M.name.split(".")[1],oe=`data:image/${{svg:"svg+xml",png:"png"}[$e]};base64,${me}`;r(0,t.logo=oe,t),console.log(oe),a.clearFiles()};function H(k,C){i.$$.not_equal(C.text,k)&&(C.text=k,r(0,t),r(8,n),r(1,o))}function L(k,C){i.$$.not_equal(s[C],k)&&(s[C]=k,r(4,s))}const Y=async k=>{k.key==="Enter"&&u()},F=k=>{r(0,t.locations=t.locations.filter((C,M)=>M!==k),t)};function Z(k){i.$$.not_equal(t.categories,k)&&(t.categories=k,r(0,t),r(8,n),r(1,o))}function X(){t.portalInherit.website=this.checked,r(0,t),r(8,n),r(1,o)}function le(k){i.$$.not_equal(t.portal.website,k)&&(t.portal.website=k,r(0,t),r(8,n),r(1,o))}function _(){t.portalInherit.name=this.checked,r(0,t),r(8,n),r(1,o)}function v(k){i.$$.not_equal(t.portal.name,k)&&(t.portal.name=k,r(0,t),r(8,n),r(1,o))}function ie(){t.portalInherit.description=this.checked,r(0,t),r(8,n),r(1,o)}function ce(k){i.$$.not_equal(t.portal.description,k)&&(t.portal.description=k,r(0,t),r(8,n),r(1,o))}return i.$$set=k=>{"brand"in k&&r(0,t=k.brand),"brands"in k&&r(8,n=k.brands)},i.$$.update=()=>{i.$$.dirty[0]&259&&(t!=null&&t.parentId&&(r(1,o=!0),r(5,f=n[t.parentId])),t&&!(t!=null&&t.portal)&&(r(0,t.portal={},t),r(0,t.portalInherit={name:o,website:o,description:o},t))),i.$$.dirty[0]&1&&t&&r(0,t.locations=(t.locations||[]).map(k=>{let C=k.text,M=C.match(/(^(.*?),\s+)?(.+?),?\s*([A-z][A-z])\s*?([\d-]{5,})?$/);if(!M){let x=C.match(/^[A-z][A-z]$/);return console.log("ParsedState",x,`|${C}|`),x?{text:C,state:x[0]}:{text:C}}return{text:C,line:[M[2]].filter(Boolean),city:M[3],state:M[4],postalCode:M[5]}}),t)},[t,o,a,l,s,f,p,u,n,c,m,$,w,q,R,z,J,H,L,Y,F,Z,X,le,_,v,ie,ce]}class qt extends we{constructor(e){super();ve(this,e,Vt,St,ge,{brand:0,brands:8},null,[-1,-1])}}function zt(){let i=null;return(e,r)=>{i&&clearInterval(i),i=setTimeout(e,r)}}function Ge(i){try{return new URL(i).origin.replace(/^https:\/\/www\./,"https://")}catch{return}}const Lt="https://example.org/fhir";function jt(i){let e=i.match(/(https:\/\/.+)\/[^/]+\/[^/]+/);return e?e[1]:Lt}function Mt(i){var e,r;return`${(e=i==null?void 0:i.line)!=null&&e.length?i.line.join(" ")+" ":""}${i.city?i.city+", ":""}${i.state?i.state+" ":""}${(r=i.postalCode)!=null?r:""}`.trim()}function Gt(i){var s,o,f,p;const e={id:i.id,parentId:(s=i==null?void 0:i.partOf)!=null&&s.reference?i.partOf.reference.split("Organization/")[1]:void 0,name:i.name,alias:i.alias,categories:(i.type||[]).map(u=>u.coding[0].code),locations:i.address.map(u=>_e(fe({},u),{text:Mt(u)})),portal:{},portalInherit:{name:!1,description:!1,website:!1}},r=i.extension.filter(u=>u.url==="https://argonaut.fhir.us/brand-logo");r.length>0&&(e.logo=r[0].valueUrl);const t=i.extension.filter(u=>u.url==="https://argonaut.fhir.us/patient-access-name");t.length>0&&(e.portal.name=t[0].valueString);const n=i.extension.filter(u=>u.url==="https://argonaut.fhir.us/patient-access-description");n.length>0&&(e.portal.description=n[0].valueString);const a=i.extension.filter(u=>u.url==="https://argonaut.fhir.us/patient-access-url");a.length>0&&(e.portal.website=a[0].valueUrl),e.parentId&&((o=e==null?void 0:e.portal)!=null&&o.name||(e.portalInherit.name=!0),(f=e==null?void 0:e.portal)!=null&&f.description||(e.portalInherit.description=!0),(p=e==null?void 0:e.portal)!=null&&p.website||(e.portalInherit.website=!0));const l=i.telecom.filter(u=>u.system==="url");return l.length>0&&(e.website=l[0].value),e}function Ft(i,e){const r=i.entry.filter(s=>s.resource.resourceType==="Organization").map(s=>s.resource).filter(s=>{var o;return!e||s.id===e||((o=s==null?void 0:s.partOf)==null?void 0:o.reference.endsWith(e))});console.log("root",e,r);const t=i.entry.map(s=>s.fullUrl).filter(s=>s.startsWith("https://")).map(jt);let n=ut.uniq(t);n.length>1&&(console.log("Can't determine base URL",n),n=[]);const a=n[0];console.log("base",a);const l=r.map(s=>Gt(s));return{baseUrl:a,brands:Object.fromEntries(l.map(s=>[s.id,s]))}}function Ht(i,e){return{resourceType:"Bundle",type:"collection",entry:Object.entries(i).map(([r,t])=>{var n,a,l,s,o,f;return{fullUrl:`${e}/Organization/${r}`,resource:{resourceType:"Organization",id:r,extension:[...t!=null&&t.logo?[{url:"https://argonaut.fhir.us/brand-logo",valueUrl:t.logo}]:[],...!((n=t==null?void 0:t.portalInherit)!=null&&n.website)&&((a=t==null?void 0:t.portal)==null?void 0:a.website)?[{url:"https://argonaut.fhir.us/patient-access-url",valueUrl:t.portal.website}]:[],...!((l=t==null?void 0:t.portalInherit)!=null&&l.name)&&((s=t.portal)==null?void 0:s.name)?[{url:"https://argonaut.fhir.us/patient-access-name",valueString:t.portal.name}]:[],...!((o=t.portalInherit)!=null&&o.description)&&((f=t.portal)==null?void 0:f.description)?[{url:"https://argonaut.fhir.us/patient-access-description",valueString:t.portal.description}]:[]],name:t.name,partOf:t.parentId?{reference:`Organization/${t.parentId}`}:void 0,alias:t.alias,address:(t.locations||[]).map(p=>({line:p==null?void 0:p.line,city:p==null?void 0:p.city,state:p==null?void 0:p.state,postalCode:p==null?void 0:p.postalCode})),telecom:[...t.website?[{system:"url",value:t.website}]:[]],identifier:[...Ge(t==null?void 0:t.website)?[{system:"urn:ietf:rfc:3986",value:Ge(t==null?void 0:t.website)}]:[]],type:((t==null?void 0:t.categories)||[]).map(p=>({coding:[{system:"https://argonaut.fhir.us",code:p}]}))}}})}}function Fe(i,e,r){const t=i.slice();return t[10]=e[r][0],t[11]=e[r][1],t}function Wt(i){let e,r,t,n,a;return{c(){e=N("h1"),r=A("SMART Patient Access: Brand Editor ("),t=N("a"),n=A("?"),a=A(")"),this.h()},l(l){e=P(l,"H1",{class:!0});var s=V(e);r=O(s,"SMART Patient Access: Brand Editor ("),t=P(s,"A",{target:!0,href:!0});var o=V(t);n=O(o,"?"),o.forEach(d),a=O(s,")"),s.forEach(d),this.h()},h(){S(t,"target","_blank"),S(t,"href","https://hackmd.io/@argonaut/patient-access-brands"),S(e,"class","svelte-1ggurck")},m(l,s){g(l,e,s),U(e,r),U(e,t),U(t,n),U(e,a)},d(l){l&&d(e)}}}function Jt(i){let e,r;return e=new pe({props:{sm:4,$$slots:{default:[Wt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&16384&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Kt(i){let e,r,t,n,a;return n=new ct({props:{style:"position: absolute; top: 0px; right: 1rem;",text:i[1],feedback:"Copied Brand Bundle to clipboard"}}),{c(){e=N("pre"),r=A(i[1]),t=T(),I(n.$$.fragment),this.h()},l(l){e=P(l,"PRE",{style:!0});var s=V(e);r=O(s,i[1]),s.forEach(d),t=D(l),y(n.$$.fragment,l),this.h()},h(){j(e,"overflow-x","clip"),j(e,"margin-bottom","1em")},m(l,s){g(l,e,s),U(e,r),g(l,t,s),B(n,l,s),a=!0},p(l,s){(!a||s&2)&&ne(r,l[1]);const o={};s&2&&(o.text=l[1]),n.$set(o)},i(l){a||(h(n.$$.fragment,l),a=!0)},o(l){b(n.$$.fragment,l),a=!1},d(l){l&&d(e),l&&d(t),E(n,l)}}}function Qt(i){let e,r,t;return e=new It({props:{brand:i[11],parentBrand:i[0][i[11].parentId]}}),e.$on("add-affiliated-brand",function(){Ae(i[3](i[10]))&&i[3](i[10]).apply(this,arguments)}),e.$on("remove-affiliated-brand",function(){Ae(i[4](i[10]))&&i[4](i[10]).apply(this,arguments)}),{c(){I(e.$$.fragment),r=T()},l(n){y(e.$$.fragment,n),r=D(n)},m(n,a){B(e,n,a),g(n,r,a),t=!0},p(n,a){i=n;const l={};a&1&&(l.brand=i[11]),a&1&&(l.parentBrand=i[0][i[11].parentId]),e.$set(l)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){E(e,n),n&&d(r)}}}function He(i){let e,r;return e=new pe({props:{class:"tile-column",sm:4,$$slots:{default:[Qt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&16385&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Xt(i){let e,r,t=Object.entries(i[0]),n=[];for(let l=0;l<t.length;l+=1)n[l]=He(Fe(i,t,l));const a=l=>b(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=G()},l(l){for(let s=0;s<n.length;s+=1)n[s].l(l);e=G()},m(l,s){for(let o=0;o<n.length;o+=1)n[o].m(l,s);g(l,e,s),r=!0},p(l,s){if(s&25){t=Object.entries(l[0]);let o;for(o=0;o<t.length;o+=1){const f=Fe(l,t,o);n[o]?(n[o].p(f,s),h(n[o],1)):(n[o]=He(f),n[o].c(),h(n[o],1),n[o].m(e.parentNode,e))}for(te(),o=t.length;o<n.length;o+=1)a(o);re()}},i(l){if(!r){for(let s=0;s<t.length;s+=1)h(n[s]);r=!0}},o(l){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);r=!1},d(l){ye(n,l),l&&d(e)}}}function Yt(i){let e,r;return e=new he({props:{$$slots:{default:[Xt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&16385&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Zt(i){let e,r;return e=new ke({props:{noGutter:!0,$$slots:{default:[Yt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const a={};n&16385&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function We(i){let e,r,t;function n(l){i[6](l)}let a={brands:i[0]};return i[0][i[2].id]!==void 0&&(a.brand=i[0][i[2].id]),e=new qt({props:a}),W.push(()=>K(e,"brand",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const o={};s&1&&(o.brands=l[0]),!r&&s&5&&(r=!0,o.brand=l[0][l[2].id],Q(()=>r=!1)),e.$set(o)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function xt(i){let e=i[2].id,r,t,n=We(i);return{c(){n.c(),r=G()},l(a){n.l(a),r=G()},m(a,l){n.m(a,l),g(a,r,l),t=!0},p(a,l){l&4&&ge(e,e=a[2].id)?(te(),b(n,1,1,mt),re(),n=We(a),n.c(),h(n),n.m(r.parentNode,r)):n.p(a,l)},i(a){t||(h(n),t=!0)},o(a){b(n),t=!1},d(a){a&&d(r),n.d(a)}}}function er(i){let e,r,t,n,a,l;return e=new pe({props:{style:"position: relative;",lg:4,sm:4,$$slots:{default:[Kt]},$$scope:{ctx:i}}}),t=new pe({props:{lg:4,sm:4,style:"margin-bottom: 1em;",$$slots:{default:[Zt]},$$scope:{ctx:i}}}),a=new pe({props:{lg:8,sm:4,$$slots:{default:[xt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment),r=T(),I(t.$$.fragment),n=T(),I(a.$$.fragment)},l(s){y(e.$$.fragment,s),r=D(s),y(t.$$.fragment,s),n=D(s),y(a.$$.fragment,s)},m(s,o){B(e,s,o),g(s,r,o),B(t,s,o),g(s,n,o),B(a,s,o),l=!0},p(s,o){const f={};o&16386&&(f.$$scope={dirty:o,ctx:s}),e.$set(f);const p={};o&16385&&(p.$$scope={dirty:o,ctx:s}),t.$set(p);const u={};o&16389&&(u.$$scope={dirty:o,ctx:s}),a.$set(u)},i(s){l||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(a.$$.fragment,s),l=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),b(a.$$.fragment,s),l=!1},d(s){E(e,s),s&&d(r),E(t,s),s&&d(n),E(a,s)}}}function tr(i){let e,r,t,n;return e=new he({props:{$$slots:{default:[Jt]},$$scope:{ctx:i}}}),t=new he({props:{$$slots:{default:[er]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment),r=T(),I(t.$$.fragment)},l(a){y(e.$$.fragment,a),r=D(a),y(t.$$.fragment,a)},m(a,l){B(e,a,l),g(a,r,l),B(t,a,l),n=!0},p(a,l){const s={};l&16384&&(s.$$scope={dirty:l,ctx:a}),e.$set(s);const o={};l&16391&&(o.$$scope={dirty:l,ctx:a}),t.$set(o)},i(a){n||(h(e.$$.fragment,a),h(t.$$.fragment,a),n=!0)},o(a){b(e.$$.fragment,a),b(t.$$.fragment,a),n=!1},d(a){E(e,a),a&&d(r),E(t,a)}}}function rr(i){let e,r;return e=new ke({props:{$$slots:{default:[tr]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,[n]){const a={};n&16391&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}const nr="https://ehr.example.org";function lr(i,e,r){let t;Je(i,se,m=>r(2,t=m));let n={id:De(),name:"TODO: Add a name"},a={[n.id]:fe({},n)};s();let l=nr;pt(async()=>{const m=new URLSearchParams(window.location.search),$=m.get("source"),w=m.get("root");if($){let q=await fetch($).then(z=>z.json()),R=Ft(q,w);r(5,l=R.baseUrl),r(0,a=R.brands),s()}});function s(){let m=Object.values(a);m.length!==0&&(m.length===1?ue(se,t={id:m[0].id},t):ue(se,t={id:m.filter($=>!$.parentId)[0].id},t))}let o="",f=zt();function p(m){return $=>{const w=_e(fe({},n),{id:De(),parentId:m});r(0,a=_e(fe({},a),{[w.id]:w})),ue(se,t={id:w.id},t)}}function u(m){return $=>{r(0,a=Object.fromEntries(Object.entries(a).filter(([w,q])=>w!==m)))}}function c(m){i.$$.not_equal(a[t.id],m)&&(a[t.id]=m,r(0,a))}return i.$$.update=()=>{i.$$.dirty&33&&f(()=>{r(1,o=JSON.stringify(Ht(a,l||"https://ehr.example.org"),null,2))},200)},[a,o,t,p,u,l,c]}class ar extends we{constructor(e){super();ve(this,e,lr,rr,ge,{})}}export{ar as default};
