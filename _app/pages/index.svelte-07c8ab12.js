var Ke=Object.defineProperty,Qe=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var Ue=(l,e,r)=>e in l?Ke(l,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[e]=r,fe=(l,e)=>{for(var r in e||(e={}))Ye.call(e,r)&&Ue(l,r,e[r]);if(Ee)for(var r of Ee(e))Ze.call(e,r)&&Ue(l,r,e[r]);return l},de=(l,e)=>Qe(l,Xe(e));import{D as xe,S as we,i as ve,s as be,L as et,t as P,k as T,w as I,l as H,h as O,m as D,x as y,g as h,y as B,j as ne,n as te,o as w,p as re,q as g,d,B as E,M as Je,N as tt,O as ke,P as rt,e as C,c as S,a as V,b as L,Q as ge,J as U,R as ue,T as he,U as ce,V as Ie,f as q,W as nt,X as lt,Y as ee,E as Te,Z as J,_ as it,$ as oe,a0 as K,a1 as Q,a2 as ye,a3 as st,a4 as ot,a5 as Be,a6 as at,a7 as De,v as ft,a8 as pe,K as ut,a9 as pt,aa as Ae}from"../chunks/vendor-661259fa.js";const se=xe({id:null});function ct(l){var u,c,m,$,b,N;let e,r,t=(((c=(u=l[0])==null?void 0:u.portalInherit)!=null&&c.name?($=(m=l[1])==null?void 0:m.portal)==null?void 0:$.name:(N=(b=l[0])==null?void 0:b.portal)==null?void 0:N.name)||"TODO: Add portal name, URL, and description")+"",n,o,i,s,a,f,p;return{c(){e=C("div"),r=C("p"),n=P(t),o=T(),i=C("button"),s=P("View data"),a=T(),f=C("button"),p=P("Connect"),this.h()},l(z){e=S(z,"DIV",{style:!0});var A=V(e);r=S(A,"P",{style:!0});var j=V(r);n=O(j,t),j.forEach(d),o=D(A),i=S(A,"BUTTON",{class:!0,kind:!0});var F=V(i);s=O(F,"View data"),F.forEach(d),a=D(A),f=S(A,"BUTTON",{class:!0,kind:!0});var G=V(f);p=O(G,"Connect"),G.forEach(d),A.forEach(d),this.h()},h(){q(r,"font-size",".8rem"),q(r,"margin-top",".5em"),L(i,"class","example svelte-1g6h6zr"),L(i,"kind","primary"),L(f,"class","example svelte-1g6h6zr"),L(f,"kind","primary"),q(e,"margin-left","1em"),q(e,"margin-right","1em"),q(e,"display","flex"),q(e,"align-items","self-end")},m(z,A){h(z,e,A),U(e,r),U(r,n),U(e,o),U(e,i),U(i,s),U(e,a),U(e,f),U(f,p)},p(z,A){var j,F,G,Y,W,Z;A&3&&t!==(t=(((F=(j=z[0])==null?void 0:j.portalInherit)!=null&&F.name?(Y=(G=z[1])==null?void 0:G.portal)==null?void 0:Y.name:(Z=(W=z[0])==null?void 0:W.portal)==null?void 0:Z.name)||"TODO: Add portal name, URL, and description")+"")&&ne(n,t)},d(z){z&&d(e)}}}function mt(l){let e,r;return e=new he({props:{$$slots:{default:[ct]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&259&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function $t(l){let e,r,t,n,o=l[0].name+"",i,s,a,f,p,u,c;return f=new ke({props:{noGutter:!0,$$slots:{default:[mt]},$$scope:{ctx:l}}}),u=new rt({props:{style:"cursor: pointer; position: absolute; top: 0%; right: 0%;"}}),u.$on("click",l[4]),{c(){e=C("h3"),r=C("img"),n=T(),i=P(o),s=P(`
    \xA0`),a=T(),I(f.$$.fragment),p=T(),I(u.$$.fragment),this.h()},l(m){e=S(m,"H3",{class:!0});var $=V(e);r=S($,"IMG",{alt:!0,class:!0,src:!0}),n=D($),i=O($,o),s=O($,`
    \xA0`),$.forEach(d),a=D(m),y(f.$$.fragment,m),p=D(m),y(u.$$.fragment,m),this.h()},h(){var m;L(r,"alt","logo"),L(r,"class","logo svelte-1g6h6zr"),ge(r.src,t=(m=l[0].logo)!=null?m:"smart-burst.svg")||L(r,"src",t),L(e,"class","name svelte-1g6h6zr")},m(m,$){h(m,e,$),U(e,r),U(e,n),U(e,i),U(e,s),h(m,a,$),B(f,m,$),h(m,p,$),B(u,m,$),c=!0},p(m,$){var N;(!c||$&1&&!ge(r.src,t=(N=m[0].logo)!=null?N:"smart-burst.svg"))&&L(r,"src",t),(!c||$&1)&&o!==(o=m[0].name+"")&&ne(i,o);const b={};$&259&&(b.$$scope={dirty:$,ctx:m}),f.$set(b)},i(m){c||(g(f.$$.fragment,m),g(u.$$.fragment,m),c=!0)},o(m){w(f.$$.fragment,m),w(u.$$.fragment,m),c=!1},d(m){m&&d(e),m&&d(a),E(f,m),m&&d(p),E(u,m)}}}function _t(l){let e,r;return e=new ce({props:{small:!0,style:"display: flex; align-items: centered; padding-left: 1em; padding-right: 1em; width: 100%; max-width: unset; min-height: 2rem; gap: 1em;",kind:"danger-tertiary",$$slots:{default:[gt]},$$scope:{ctx:l}}}),e.$on("click",l[7]),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&256&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function dt(l){let e,r;return e=new ce({props:{small:!0,style:"display: flex; align-items: centered; padding-left: 1em; padding-right: 1em; width: 100%; max-width: unset; min-height: 2rem; gap: 1em;",kind:"tertiary",$$slots:{default:[ht]},$$scope:{ctx:l}}}),e.$on("click",l[6]),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&256&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function gt(l){let e,r,t,n,o;return e=new Ie({}),{c(){I(e.$$.fragment),r=T(),t=C("div"),n=P("Remove affiliated brand"),this.h()},l(i){y(e.$$.fragment,i),r=D(i),t=S(i,"DIV",{style:!0});var s=V(t);n=O(s,"Remove affiliated brand"),s.forEach(d),this.h()},h(){q(t,"flex-grow","1")},m(i,s){B(e,i,s),h(i,r,s),h(i,t,s),U(t,n),o=!0},i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),o=!1},d(i){E(e,i),i&&d(r),i&&d(t)}}}function ht(l){let e,r,t,n,o;return e=new nt({}),{c(){I(e.$$.fragment),r=T(),t=C("div"),n=P("Add affiliated brand"),this.h()},l(i){y(e.$$.fragment,i),r=D(i),t=S(i,"DIV",{style:!0});var s=V(t);n=O(s,"Add affiliated brand"),s.forEach(d),this.h()},h(){q(t,"flex-grow","1")},m(i,s){B(e,i,s),h(i,r,s),h(i,t,s),U(t,n),o=!0},i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),o=!1},d(i){E(e,i),i&&d(r),i&&d(t)}}}function bt(l){var m;let e="",r,t,n,o,i,s,a,f;n=new et({props:{class:"tile",style:`opacity: ${((m=l[2])==null?void 0:m.id)!==null&&l[2].id!==l[0].id?"50":100}%`,$$slots:{default:[$t]},$$scope:{ctx:l}}}),n.$on("click",l[5]);const p=[dt,_t],u=[];function c($,b){return $[0].parentId?1:0}return i=c(l),s=u[i]=p[i](l),{c(){r=P(e),t=T(),I(n.$$.fragment),o=T(),s.c(),a=H()},l($){r=O($,e),t=D($),y(n.$$.fragment,$),o=D($),s.l($),a=H()},m($,b){h($,r,b),h($,t,b),B(n,$,b),h($,o,b),u[i].m($,b),h($,a,b),f=!0},p($,[b]){var A;(!f||b&1)&&e!==(e="")&&ne(r,e);const N={};b&5&&(N.style=`opacity: ${((A=$[2])==null?void 0:A.id)!==null&&$[2].id!==$[0].id?"50":100}%`),b&263&&(N.$$scope={dirty:b,ctx:$}),n.$set(N);let z=i;i=c($),i===z?u[i].p($,b):(te(),w(u[z],1,1,()=>{u[z]=null}),re(),s=u[i],s?s.p($,b):(s=u[i]=p[i]($),s.c()),g(s,1),s.m(a.parentNode,a))},i($){f||(g(n.$$.fragment,$),g(s),f=!0)},o($){w(n.$$.fragment,$),w(s),f=!1},d($){$&&d(r),$&&d(t),E(n,$),$&&d(o),u[i].d($),$&&d(a)}}}function wt(l,e,r){let t;Je(l,se,u=>r(2,t=u));const n=tt();let{brand:o}=e,{parentBrand:i}=e;const s=()=>{ue(se,t={id:o.id},t),console.log("Editing",o.id)},a=()=>{ue(se,t={id:o.id},t),console.log("Editing",o.id)},f=()=>{n("add-affiliated-brand",o)},p=()=>{n("remove-affiliated-brand",o)};return l.$$set=u=>{"brand"in u&&r(0,o=u.brand),"parentBrand"in u&&r(1,i=u.parentBrand)},[o,i,t,n,s,a,f,p]}class vt extends we{constructor(e){super();ve(this,e,wt,bt,be,{brand:0,parentBrand:1})}}function Ne(l,e,r){const t=l.slice();return t[28]=e[r],t[29]=e,t[30]=r,t}function Pe(l,e,r){const t=l.slice();return t[31]=e[r],t[32]=e,t[30]=r,t}function Oe(l){let e,r;return e=new lt({props:{$$slots:{default:[Ot]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n[0]&63|n[1]&4&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function kt(l){let e,r,t,n,o,i;function s(f){l[9](f)}let a={autofocus:!0,invalid:l[0].name=="",placeholder:"Associated Physicians of Madison"};return l[0].name!==void 0&&(a.value=l[0].name),n=new oe({props:a}),J.push(()=>K(n,"value",s)),{c(){e=C("div"),r=P("The primary name associated with your brand."),t=T(),I(n.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=V(e);r=O(p,"The primary name associated with your brand."),p.forEach(d),t=D(f),y(n.$$.fragment,f),this.h()},h(){L(e,"class","bx--form__helper-text")},m(f,p){h(f,e,p),U(e,r),h(f,t,p),B(n,f,p),i=!0},p(f,p){const u={};p[0]&1&&(u.invalid=f[0].name==""),!o&&p[0]&1&&(o=!0,u.value=f[0].name,Q(()=>o=!1)),n.$set(u)},i(f){i||(g(n.$$.fragment,f),i=!0)},o(f){w(n.$$.fragment,f),i=!1},d(f){f&&d(e),f&&d(t),E(n,f)}}}function It(l){var f,p;let e,r,t,n,o,i;function s(u){l[10](u)}let a={invalid:!((p=(f=l[0])==null?void 0:f.website)!=null&&p.startsWith("https://")),placeholder:"https://apmadison.com"};return l[0].website!==void 0&&(a.value=l[0].website),n=new oe({props:a}),J.push(()=>K(n,"value",s)),{c(){e=C("div"),r=P(`The primary website associated with your brand. Note: this is distinct
        from your patient portal.`),t=T(),I(n.$$.fragment),this.h()},l(u){e=S(u,"DIV",{class:!0});var c=V(e);r=O(c,`The primary website associated with your brand. Note: this is distinct
        from your patient portal.`),c.forEach(d),t=D(u),y(n.$$.fragment,u),this.h()},h(){L(e,"class","bx--form__helper-text")},m(u,c){h(u,e,c),U(e,r),h(u,t,c),B(n,u,c),i=!0},p(u,c){var $,b;const m={};c[0]&1&&(m.invalid=!((b=($=u[0])==null?void 0:$.website)!=null&&b.startsWith("https://"))),!o&&c[0]&1&&(o=!0,m.value=u[0].website,Q(()=>o=!1)),n.$set(m)},i(u){i||(g(n.$$.fragment,u),i=!0)},o(u){w(n.$$.fragment,u),i=!1},d(u){u&&d(e),u&&d(t),E(n,u)}}}function Ce(l){let e,r,t,n,o,i,s;function a(c){l[11](c,l[30])}function f(c){l[12](c,l[30])}let p={invalid:l[0].alias[l[30]]=="",style:"width: 100%;",placeholder:"Madison Doctors Group"};l[0].alias[l[30]]!==void 0&&(p.value=l[0].alias[l[30]]),l[3][l[30]]!==void 0&&(p.ref=l[3][l[30]]),r=new oe({props:p}),J.push(()=>K(r,"value",a)),J.push(()=>K(r,"ref",f)),r.$on("keyup",l[13]);function u(){return l[14](l[30])}return i=new Ie({props:{style:"margin-left: .5em; cursor: pointer; min-width: 16px;"}}),i.$on("click",u),{c(){e=C("div"),I(r.$$.fragment),o=T(),I(i.$$.fragment),this.h()},l(c){e=S(c,"DIV",{style:!0});var m=V(e);y(r.$$.fragment,m),o=D(m),y(i.$$.fragment,m),m.forEach(d),this.h()},h(){q(e,"display","flex"),q(e,"align-items","baseline")},m(c,m){h(c,e,m),B(r,e,null),U(e,o),B(i,e,null),s=!0},p(c,m){l=c;const $={};m[0]&1&&($.invalid=l[0].alias[l[30]]==""),!t&&m[0]&1&&(t=!0,$.value=l[0].alias[l[30]],Q(()=>t=!1)),!n&&m[0]&8&&(n=!0,$.ref=l[3][l[30]],Q(()=>n=!1)),r.$set($)},i(c){s||(g(r.$$.fragment,c),g(i.$$.fragment,c),s=!0)},o(c){w(r.$$.fragment,c),w(i.$$.fragment,c),s=!1},d(c){c&&d(e),E(r),E(i)}}}function yt(l){let e;return{c(){e=P("Add alias")},l(r){e=O(r,"Add alias")},m(r,t){h(r,e,t)},d(r){r&&d(e)}}}function Bt(l){var p;let e,r,t,n,o,i,s=((p=l[0])==null?void 0:p.alias)||[],a=[];for(let u=0;u<s.length;u+=1)a[u]=Ce(Pe(l,s,u));const f=u=>w(a[u],1,1,()=>{a[u]=null});return o=new ce({props:{small:!0,kind:"ghost",$$slots:{default:[yt]},$$scope:{ctx:l}}}),o.$on("click",l[6]),{c(){e=C("div"),r=P(`An alias associated with your Brand (e.g., a former name or other term
        patients might use to search for your brand)`),t=T();for(let u=0;u<a.length;u+=1)a[u].c();n=T(),I(o.$$.fragment),this.h()},l(u){e=S(u,"DIV",{class:!0});var c=V(e);r=O(c,`An alias associated with your Brand (e.g., a former name or other term
        patients might use to search for your brand)`),c.forEach(d),t=D(u);for(let m=0;m<a.length;m+=1)a[m].l(u);n=D(u),y(o.$$.fragment,u),this.h()},h(){L(e,"class","bx--form__helper-text")},m(u,c){h(u,e,c),U(e,r),h(u,t,c);for(let m=0;m<a.length;m+=1)a[m].m(u,c);h(u,n,c),B(o,u,c),i=!0},p(u,c){var $;if(c[0]&73){s=(($=u[0])==null?void 0:$.alias)||[];let b;for(b=0;b<s.length;b+=1){const N=Pe(u,s,b);a[b]?(a[b].p(N,c),g(a[b],1)):(a[b]=Ce(N),a[b].c(),g(a[b],1),a[b].m(n.parentNode,n))}for(te(),b=s.length;b<a.length;b+=1)f(b);re()}const m={};c[1]&4&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){if(!i){for(let c=0;c<s.length;c+=1)g(a[c]);g(o.$$.fragment,u),i=!0}},o(u){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)w(a[c]);w(o.$$.fragment,u),i=!1},d(u){u&&d(e),u&&d(t),ye(a,u),u&&d(n),E(o,u)}}}function Se(l){let e,r;return{c(){e=C("img"),this.h()},l(t){e=S(t,"IMG",{style:!0,alt:!0,src:!0}),this.h()},h(){q(e,"width","1em"),q(e,"height","1em"),L(e,"alt","logo"),ge(e.src,r=l[0].logo)||L(e,"src",r)},m(t,n){h(t,e,n)},p(t,n){n[0]&1&&!ge(e.src,r=t[0].logo)&&L(e,"src",r)},d(t){t&&d(e)}}}function Et(l){let e,r,t,n=l[0].logo&&Se(l),o={buttonLabel:"Choose logo file",labelDescription:"Square PNG or SVG, 1024x1024 pixels with transparent background preferred",accept:[".png",".svg"],status:"complete"};return r=new st({props:o}),l[15](r),r.$on("change",l[16]),{c(){n&&n.c(),e=T(),I(r.$$.fragment)},l(i){n&&n.l(i),e=D(i),y(r.$$.fragment,i)},m(i,s){n&&n.m(i,s),h(i,e,s),B(r,i,s),t=!0},p(i,s){i[0].logo?n?n.p(i,s):(n=Se(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null);const a={};r.$set(a)},i(i){t||(g(r.$$.fragment,i),t=!0)},o(i){w(r.$$.fragment,i),t=!1},d(i){n&&n.d(i),i&&d(e),l[15](null),E(r,i)}}}function ze(l){let e,r,t,n,o,i,s;function a(c){l[17](c,l[28])}function f(c){l[18](c,l[30])}let p={invalid:Object.entries(l[0].locations[l[30]]).length===1,style:"width: 100%;",placeholder:"123 Regent St, Madison, WI 53726"};l[28].text!==void 0&&(p.value=l[28].text),l[4][l[30]]!==void 0&&(p.ref=l[4][l[30]]),r=new oe({props:p}),J.push(()=>K(r,"value",a)),J.push(()=>K(r,"ref",f)),r.$on("keyup",l[19]);function u(){return l[20](l[30])}return i=new Ie({props:{style:"margin-left: .5em; cursor: pointer; min-width: 16px;"}}),i.$on("click",u),{c(){e=C("div"),I(r.$$.fragment),o=T(),I(i.$$.fragment),this.h()},l(c){e=S(c,"DIV",{style:!0});var m=V(e);y(r.$$.fragment,m),o=D(m),y(i.$$.fragment,m),m.forEach(d),this.h()},h(){q(e,"display","flex"),q(e,"align-items","baseline")},m(c,m){h(c,e,m),B(r,e,null),U(e,o),B(i,e,null),s=!0},p(c,m){l=c;const $={};m[0]&1&&($.invalid=Object.entries(l[0].locations[l[30]]).length===1),!t&&m[0]&1&&(t=!0,$.value=l[28].text,Q(()=>t=!1)),!n&&m[0]&16&&(n=!0,$.ref=l[4][l[30]],Q(()=>n=!1)),r.$set($)},i(c){s||(g(r.$$.fragment,c),g(i.$$.fragment,c),s=!0)},o(c){w(r.$$.fragment,c),w(i.$$.fragment,c),s=!1},d(c){c&&d(e),E(r),E(i)}}}function Ut(l){let e;return{c(){e=P("Add location")},l(r){e=O(r,"Add location")},m(r,t){h(r,e,t)},d(r){r&&d(e)}}}function Tt(l){let e,r,t,n,o,i,s=l[0].locations||[],a=[];for(let p=0;p<s.length;p+=1)a[p]=ze(Ne(l,s,p));const f=p=>w(a[p],1,1,()=>{a[p]=null});return o=new ce({props:{small:!0,kind:"ghost",$$slots:{default:[Ut]},$$scope:{ctx:l}}}),o.$on("click",l[7]),{c(){e=C("div"),r=P(`A location (street address, city/state, or city/state/zip) associated
        with your Brand`),t=T();for(let p=0;p<a.length;p+=1)a[p].c();n=T(),I(o.$$.fragment),this.h()},l(p){e=S(p,"DIV",{class:!0});var u=V(e);r=O(u,`A location (street address, city/state, or city/state/zip) associated
        with your Brand`),u.forEach(d),t=D(p);for(let c=0;c<a.length;c+=1)a[c].l(p);n=D(p),y(o.$$.fragment,p),this.h()},h(){L(e,"class","bx--form__helper-text")},m(p,u){h(p,e,u),U(e,r),h(p,t,u);for(let c=0;c<a.length;c+=1)a[c].m(p,u);h(p,n,u),B(o,p,u),i=!0},p(p,u){if(u[0]&145){s=p[0].locations||[];let m;for(m=0;m<s.length;m+=1){const $=Ne(p,s,m);a[m]?(a[m].p($,u),g(a[m],1)):(a[m]=ze($),a[m].c(),g(a[m],1),a[m].m(n.parentNode,n))}for(te(),m=s.length;m<a.length;m+=1)f(m);re()}const c={};u[1]&4&&(c.$$scope={dirty:u,ctx:p}),o.$set(c)},i(p){if(!i){for(let u=0;u<s.length;u+=1)g(a[u]);g(o.$$.fragment,p),i=!0}},o(p){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)w(a[u]);w(o.$$.fragment,p),i=!1},d(p){p&&d(e),p&&d(t),ye(a,p),p&&d(n),E(o,p)}}}function Dt(l){let e,r,t;function n(i){l[21](i)}let o={label:"Select categories",items:[{id:"prov",text:"Healthcare Provider"},{id:"ins",text:"Insurance Company"},{id:"laboratory",text:"Laboratory"},{id:"pharmacy",text:"Pharmacy"},{id:"imaging",text:"Imaging Center"},{id:"health-information-network",text:"Health Information Network"},{id:"health-data-aggregator",text:"Health Data Aggregator"}]};return l[0].categories!==void 0&&(o.selectedIds=l[0].categories),e=new ot({props:o}),J.push(()=>K(e,"selectedIds",n)),{c(){I(e.$$.fragment)},l(i){y(e.$$.fragment,i)},m(i,s){B(e,i,s),t=!0},p(i,s){const a={};!r&&s[0]&1&&(r=!0,a.selectedIds=i[0].categories,Q(()=>r=!1)),e.$set(a)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function Re(l){var f,p;let e,r,t,n=(((p=(f=l[5])==null?void 0:f.portal)==null?void 0:p.website)||"")+"",o,i,s,a;return{c(){e=C("div"),r=C("input"),t=P(`
          Use portal URL from Primary Brand ("`),o=P(n),i=P('")'),this.h()},l(u){e=S(u,"DIV",{});var c=V(e);r=S(c,"INPUT",{type:!0}),t=O(c,`
          Use portal URL from Primary Brand ("`),o=O(c,n),i=O(c,'")'),c.forEach(d),this.h()},h(){L(r,"type","checkbox")},m(u,c){h(u,e,c),U(e,r),r.checked=l[0].portalInherit.website,U(e,t),U(e,o),U(e,i),s||(a=Be(r,"change",l[22]),s=!0)},p(u,c){var m,$;c[0]&1&&(r.checked=u[0].portalInherit.website),c[0]&32&&n!==(n=((($=(m=u[5])==null?void 0:m.portal)==null?void 0:$.website)||"")+"")&&ne(o,n)},d(u){u&&d(e),s=!1,a()}}}function Le(l){var i,s,a;let e,r,t;function n(f){l[23](f)}let o={invalid:!((a=(s=(i=l[0])==null?void 0:i.portal)==null?void 0:s.website)!=null&&a.startsWith("https://")),placeholder:"https://www.chart.myunitypoint.org/"};return l[0].portal.website!==void 0&&(o.value=l[0].portal.website),e=new oe({props:o}),J.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(f){y(e.$$.fragment,f)},m(f,p){B(e,f,p),t=!0},p(f,p){var c,m,$;const u={};p[0]&1&&(u.invalid=!(($=(m=(c=f[0])==null?void 0:c.portal)==null?void 0:m.website)!=null&&$.startsWith("https://"))),!r&&p[0]&1&&(r=!0,u.value=f[0].portal.website,Q(()=>r=!1)),e.$set(u)},i(f){t||(g(e.$$.fragment,f),t=!0)},o(f){w(e.$$.fragment,f),t=!1},d(f){E(e,f)}}}function At(l){let e,r,t,n,o,i,s=l[1]&&Re(l),a=(!l[1]||!l[0].portalInherit.website)&&Le(l);return{c(){e=C("div"),r=P("URL of patient portal where records are available (https only)"),t=T(),s&&s.c(),n=T(),a&&a.c(),o=H(),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=V(e);r=O(p,"URL of patient portal where records are available (https only)"),p.forEach(d),t=D(f),s&&s.l(f),n=D(f),a&&a.l(f),o=H(),this.h()},h(){L(e,"class","bx--form__helper-text")},m(f,p){h(f,e,p),U(e,r),h(f,t,p),s&&s.m(f,p),h(f,n,p),a&&a.m(f,p),h(f,o,p),i=!0},p(f,p){f[1]?s?s.p(f,p):(s=Re(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.website?a?(a.p(f,p),p[0]&3&&g(a,1)):(a=Le(f),a.c(),g(a,1),a.m(o.parentNode,o)):a&&(te(),w(a,1,1,()=>{a=null}),re())},i(f){i||(g(a),i=!0)},o(f){w(a),i=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),a&&a.d(f),f&&d(o)}}}function Ve(l){var f,p;let e,r,t,n=(((p=(f=l[5])==null?void 0:f.portal)==null?void 0:p.name)||"")+"",o,i,s,a;return{c(){e=C("div"),r=C("input"),t=P(` Use
          name from Primary Brand ("`),o=P(n),i=P('")'),this.h()},l(u){e=S(u,"DIV",{});var c=V(e);r=S(c,"INPUT",{type:!0}),t=O(c,` Use
          name from Primary Brand ("`),o=O(c,n),i=O(c,'")'),c.forEach(d),this.h()},h(){L(r,"type","checkbox")},m(u,c){h(u,e,c),U(e,r),r.checked=l[0].portalInherit.name,U(e,t),U(e,o),U(e,i),s||(a=Be(r,"change",l[24]),s=!0)},p(u,c){var m,$;c[0]&1&&(r.checked=u[0].portalInherit.name),c[0]&32&&n!==(n=((($=(m=u[5])==null?void 0:m.portal)==null?void 0:$.name)||"")+"")&&ne(o,n)},d(u){u&&d(e),s=!1,a()}}}function qe(l){let e,r,t;function n(i){l[25](i)}let o={invalid:!1,placeholder:"MyUnityPoint"};return l[0].portal.name!==void 0&&(o.value=l[0].portal.name),e=new oe({props:o}),J.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(i){y(e.$$.fragment,i)},m(i,s){B(e,i,s),t=!0},p(i,s){const a={};s[0]&1&&(a.invalid=!1),!r&&s[0]&1&&(r=!0,a.value=i[0].portal.name,Q(()=>r=!1)),e.$set(a)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function Nt(l){let e,r,t,n,o,i,s=l[1]&&Ve(l),a=(!l[1]||!l[0].portalInherit.name)&&qe(l);return{c(){e=C("div"),r=P("Name of the portal as known to patients"),t=T(),s&&s.c(),n=T(),a&&a.c(),o=H(),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=V(e);r=O(p,"Name of the portal as known to patients"),p.forEach(d),t=D(f),s&&s.l(f),n=D(f),a&&a.l(f),o=H(),this.h()},h(){L(e,"class","bx--form__helper-text")},m(f,p){h(f,e,p),U(e,r),h(f,t,p),s&&s.m(f,p),h(f,n,p),a&&a.m(f,p),h(f,o,p),i=!0},p(f,p){f[1]?s?s.p(f,p):(s=Ve(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.name?a?(a.p(f,p),p[0]&3&&g(a,1)):(a=qe(f),a.c(),g(a,1),a.m(o.parentNode,o)):a&&(te(),w(a,1,1,()=>{a=null}),re())},i(f){i||(g(a),i=!0)},o(f){w(a),i=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),a&&a.d(f),f&&d(o)}}}function Me(l){var f,p;let e,r,t,n=(p=(f=l[5])==null?void 0:f.portal)!=null&&p.description?l[5].portal.description.slice(40)+"...":"",o,i,s,a;return{c(){e=C("div"),r=C("input"),t=P(`
          Use description from Primary Brand ("`),o=P(n),i=P('")'),this.h()},l(u){e=S(u,"DIV",{});var c=V(e);r=S(c,"INPUT",{type:!0}),t=O(c,`
          Use description from Primary Brand ("`),o=O(c,n),i=O(c,'")'),c.forEach(d),this.h()},h(){L(r,"type","checkbox")},m(u,c){h(u,e,c),U(e,r),r.checked=l[0].portalInherit.description,U(e,t),U(e,o),U(e,i),s||(a=Be(r,"change",l[26]),s=!0)},p(u,c){var m,$;c[0]&1&&(r.checked=u[0].portalInherit.description),c[0]&32&&n!==(n=($=(m=u[5])==null?void 0:m.portal)!=null&&$.description?u[5].portal.description.slice(40)+"...":"")&&ne(o,n)},d(u){u&&d(e),s=!1,a()}}}function je(l){let e,r,t;function n(i){l[27](i)}let o={invalid:!1,placeholder:"Access your clinical records..."};return l[0].portal.description!==void 0&&(o.value=l[0].portal.description),e=new oe({props:o}),J.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(i){y(e.$$.fragment,i)},m(i,s){B(e,i,s),t=!0},p(i,s){const a={};s[0]&1&&(a.invalid=!1),!r&&s[0]&1&&(r=!0,a.value=i[0].portal.description,Q(()=>r=!1)),e.$set(a)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function Pt(l){let e,r,t,n,o,i,s=l[1]&&Me(l),a=(!l[1]||!l[0].portalInherit.description)&&je(l);return{c(){e=C("div"),r=P(`Description of the portal to help patients connect to the right place.
        Explain the intended audience of the portal, if you offer more than one
        portal for different audiences.`),t=T(),s&&s.c(),n=T(),a&&a.c(),o=H(),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=V(e);r=O(p,`Description of the portal to help patients connect to the right place.
        Explain the intended audience of the portal, if you offer more than one
        portal for different audiences.`),p.forEach(d),t=D(f),s&&s.l(f),n=D(f),a&&a.l(f),o=H(),this.h()},h(){L(e,"class","bx--form__helper-text")},m(f,p){h(f,e,p),U(e,r),h(f,t,p),s&&s.m(f,p),h(f,n,p),a&&a.m(f,p),h(f,o,p),i=!0},p(f,p){f[1]?s?s.p(f,p):(s=Me(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.description?a?(a.p(f,p),p[0]&3&&g(a,1)):(a=je(f),a.c(),g(a,1),a.m(o.parentNode,o)):a&&(te(),w(a,1,1,()=>{a=null}),re())},i(f){i||(g(a),i=!0)},o(f){w(a),i=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),a&&a.d(f),f&&d(o)}}}function Ot(l){let e,r=`${l[1]?"Affiliated":"Primary"} Brand Details`,t,n,o,i,s,a,f,p,u,c,m,$,b,N,z,A="Patient Portal Details",j,F,G,Y,W,Z,X,le;return o=new ee({props:{legendText:"Brand name",$$slots:{default:[kt]},$$scope:{ctx:l}}}),s=new ee({props:{legendText:"Brand website (https only)",$$slots:{default:[It]},$$scope:{ctx:l}}}),f=new ee({props:{legendText:"Brand aliases (optional)",$$slots:{default:[Bt]},$$scope:{ctx:l}}}),u=new ee({props:{legendText:"Brand logo",$$slots:{default:[Et]},$$scope:{ctx:l}}}),m=new ee({props:{legendText:"Locations (optional)",$$slots:{default:[Tt]},$$scope:{ctx:l}}}),b=new ee({props:{legendText:"Categories (optional)",$$slots:{default:[Dt]},$$scope:{ctx:l}}}),G=new ee({props:{legendText:"Portal URL",$$slots:{default:[At]},$$scope:{ctx:l}}}),W=new ee({props:{legendText:"Portal name",$$slots:{default:[Nt]},$$scope:{ctx:l}}}),X=new ee({props:{legendText:"Portal description",$$slots:{default:[Pt]},$$scope:{ctx:l}}}),{c(){e=C("h5"),t=P(r),n=T(),I(o.$$.fragment),i=T(),I(s.$$.fragment),a=T(),I(f.$$.fragment),p=T(),I(u.$$.fragment),c=T(),I(m.$$.fragment),$=T(),I(b.$$.fragment),N=T(),z=C("h5"),j=P(A),F=T(),I(G.$$.fragment),Y=T(),I(W.$$.fragment),Z=T(),I(X.$$.fragment)},l(_){e=S(_,"H5",{});var v=V(e);t=O(v,r),v.forEach(d),n=D(_),y(o.$$.fragment,_),i=D(_),y(s.$$.fragment,_),a=D(_),y(f.$$.fragment,_),p=D(_),y(u.$$.fragment,_),c=D(_),y(m.$$.fragment,_),$=D(_),y(b.$$.fragment,_),N=D(_),z=S(_,"H5",{});var ie=V(z);j=O(ie,A),ie.forEach(d),F=D(_),y(G.$$.fragment,_),Y=D(_),y(W.$$.fragment,_),Z=D(_),y(X.$$.fragment,_)},m(_,v){h(_,e,v),U(e,t),h(_,n,v),B(o,_,v),h(_,i,v),B(s,_,v),h(_,a,v),B(f,_,v),h(_,p,v),B(u,_,v),h(_,c,v),B(m,_,v),h(_,$,v),B(b,_,v),h(_,N,v),h(_,z,v),U(z,j),h(_,F,v),B(G,_,v),h(_,Y,v),B(W,_,v),h(_,Z,v),B(X,_,v),le=!0},p(_,v){(!le||v[0]&2)&&r!==(r=`${_[1]?"Affiliated":"Primary"} Brand Details`)&&ne(t,r);const ie={};v[0]&1|v[1]&4&&(ie.$$scope={dirty:v,ctx:_}),o.$set(ie);const me={};v[0]&1|v[1]&4&&(me.$$scope={dirty:v,ctx:_}),s.$set(me);const k={};v[0]&9|v[1]&4&&(k.$$scope={dirty:v,ctx:_}),f.$set(k);const R={};v[0]&5|v[1]&4&&(R.$$scope={dirty:v,ctx:_}),u.$set(R);const M={};v[0]&17|v[1]&4&&(M.$$scope={dirty:v,ctx:_}),m.$set(M);const x={};v[0]&1|v[1]&4&&(x.$$scope={dirty:v,ctx:_}),b.$set(x);const $e={};v[0]&35|v[1]&4&&($e.$$scope={dirty:v,ctx:_}),G.$set($e);const _e={};v[0]&35|v[1]&4&&(_e.$$scope={dirty:v,ctx:_}),W.$set(_e);const ae={};v[0]&35|v[1]&4&&(ae.$$scope={dirty:v,ctx:_}),X.$set(ae)},i(_){le||(g(o.$$.fragment,_),g(s.$$.fragment,_),g(f.$$.fragment,_),g(u.$$.fragment,_),g(m.$$.fragment,_),g(b.$$.fragment,_),g(G.$$.fragment,_),g(W.$$.fragment,_),g(X.$$.fragment,_),le=!0)},o(_){w(o.$$.fragment,_),w(s.$$.fragment,_),w(f.$$.fragment,_),w(u.$$.fragment,_),w(m.$$.fragment,_),w(b.$$.fragment,_),w(G.$$.fragment,_),w(W.$$.fragment,_),w(X.$$.fragment,_),le=!1},d(_){_&&d(e),_&&d(n),E(o,_),_&&d(i),E(s,_),_&&d(a),E(f,_),_&&d(p),E(u,_),_&&d(c),E(m,_),_&&d($),E(b,_),_&&d(N),_&&d(z),_&&d(F),E(G,_),_&&d(Y),E(W,_),_&&d(Z),E(X,_)}}}function Ct(l){let e,r,t=l[0]&&Oe(l);return{c(){t&&t.c(),e=H()},l(n){t&&t.l(n),e=H()},m(n,o){t&&t.m(n,o),h(n,e,o),r=!0},p(n,o){n[0]?t?(t.p(n,o),o[0]&1&&g(t,1)):(t=Oe(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(te(),w(t,1,1,()=>{t=null}),re())},i(n){r||(g(t),r=!0)},o(n){w(t),r=!1},d(n){t&&t.d(n),n&&d(e)}}}function St(l,e,r){let{brand:t}=e,{brands:n}=e,o,i=[],s=[],a=!1,f;async function p(){r(0,t.alias=t.alias||[],t).push(""),await Te(),i.slice(-1)[0].focus()}async function u(){r(0,t.locations=[...t.locations,{text:""}],t),await Te(),s.slice(-1)[0].focus()}function c(k){l.$$.not_equal(t.name,k)&&(t.name=k,r(0,t),r(8,n),r(1,a))}function m(k){l.$$.not_equal(t.website,k)&&(t.website=k,r(0,t),r(8,n),r(1,a))}function $(k,R){l.$$.not_equal(t.alias[R],k)&&(t.alias[R]=k,r(0,t),r(8,n),r(1,a))}function b(k,R){l.$$.not_equal(i[R],k)&&(i[R]=k,r(3,i))}const N=async k=>{k.key==="Enter"&&p()},z=k=>r(0,t.alias=t.alias.filter((R,M)=>M!==k),t);function A(k){J[k?"unshift":"push"](()=>{o=k,r(2,o)})}const j=async function(R){console.log(R.detail);const M=R.detail[0],x=new Uint8Array(await M.arrayBuffer());console.log(x);const $e=it(x);let _e=M.name.split(".")[1],ae=`data:image/${{svg:"svg+xml",png:"png"}[_e]};base64,${$e}`;r(0,t.logo=ae,t),console.log(ae),o.clearFiles()};function F(k,R){l.$$.not_equal(R.text,k)&&(R.text=k,r(0,t),r(8,n),r(1,a))}function G(k,R){l.$$.not_equal(s[R],k)&&(s[R]=k,r(4,s))}const Y=async k=>{k.key==="Enter"&&u()},W=k=>{r(0,t.locations=t.locations.filter((R,M)=>M!==k),t)};function Z(k){l.$$.not_equal(t.categories,k)&&(t.categories=k,r(0,t),r(8,n),r(1,a))}function X(){t.portalInherit.website=this.checked,r(0,t),r(8,n),r(1,a)}function le(k){l.$$.not_equal(t.portal.website,k)&&(t.portal.website=k,r(0,t),r(8,n),r(1,a))}function _(){t.portalInherit.name=this.checked,r(0,t),r(8,n),r(1,a)}function v(k){l.$$.not_equal(t.portal.name,k)&&(t.portal.name=k,r(0,t),r(8,n),r(1,a))}function ie(){t.portalInherit.description=this.checked,r(0,t),r(8,n),r(1,a)}function me(k){l.$$.not_equal(t.portal.description,k)&&(t.portal.description=k,r(0,t),r(8,n),r(1,a))}return l.$$set=k=>{"brand"in k&&r(0,t=k.brand),"brands"in k&&r(8,n=k.brands)},l.$$.update=()=>{l.$$.dirty[0]&259&&(t!=null&&t.parentId&&(r(1,a=!0),r(5,f=n[t.parentId])),t&&!(t!=null&&t.portal)&&(r(0,t.portal={},t),r(0,t.portalInherit={name:a,website:a,description:a},t))),l.$$.dirty[0]&1&&t&&r(0,t.locations=(t.locations||[]).map(k=>{let R=k.text,M=R.match(/^((.*?),\s+)?((.+?),?\s+)?([A-z][A-z]),?\s*?([\d-]{5,})?$/);if(!M){let x=R.match(/^[A-z][A-z]$/);return console.log("ParsedState",x,`|${R}|`),x?{text:R,state:x[0]}:{text:R}}return{text:R,line:M[2]&&M[4]?[M[2]]:void 0,city:M[4]||M[2],state:M[5],postalCode:M[6]}}),t)},[t,a,o,i,s,f,p,u,n,c,m,$,b,N,z,A,j,F,G,Y,W,Z,X,le,_,v,ie,me]}class zt extends we{constructor(e){super();ve(this,e,St,Ct,be,{brand:0,brands:8},null,[-1,-1])}}function Rt(){let l=null;return(e,r)=>{l&&clearInterval(l),l=setTimeout(e,r)}}function Fe(l){try{return new URL(l).origin.replace(/^https:\/\/www\./,"https://")}catch{return}}const Lt="https://example.org/fhir";function Vt(l){let e=l.match(/(https:\/\/.+)\/[^/]+\/[^/]+/);return e?e[1]:Lt}function qt(l){var e,r;return`${(e=l==null?void 0:l.line)!=null&&e.length?l.line.join(" ")+" ":""}${l.city?l.city+", ":""}${l.state?l.state+" ":""}${(r=l.postalCode)!=null?r:""}`.trim()}function Mt(l){var a,f,p,u,c;const e={id:l.id,parentId:(a=l==null?void 0:l.partOf)!=null&&a.reference?l.partOf.reference.split("Organization/")[1]:void 0,name:l.name,alias:l.alias,categories:(l.type||[]).map(m=>m.coding[0].code),locations:l.address.map(m=>de(fe({},m),{text:qt(m)})),portal:{},portalInherit:{name:!1,description:!1,website:!1}},r=l.extension.filter(m=>m.url==="http://hl7.org/fhir/StructureDefinition/organization-brand").flatMap(m=>m.extension.filter($=>$.url==="brandLogo"));r.length>0&&(e.logo=r[0].valueUrl);const t=((f=l.extension.find(m=>m.url==="http://hl7.org/fhir/StructureDefinition/organization-portal"))==null?void 0:f.extension)||[],n=t.filter(m=>m.url==="portalName");n.length>0&&(e.portal.name=n[0].valueString);const o=t.filter(m=>m.url==="portalDescription");o.length>0&&(e.portal.description=o[0].valueMarkdown);const i=t.filter(m=>m.url==="portalUrl");i.length>0&&(e.portal.website=i[0].valueUrl),e.parentId&&((p=e==null?void 0:e.portal)!=null&&p.name||(e.portalInherit.name=!0),(u=e==null?void 0:e.portal)!=null&&u.description||(e.portalInherit.description=!0),(c=e==null?void 0:e.portal)!=null&&c.website||(e.portalInherit.website=!0));const s=l.telecom.filter(m=>m.system==="url");return s.length>0&&(e.website=s[0].value),e}function jt(l,e){const r=l.entry.filter(s=>s.resource.resourceType==="Organization").map(s=>s.resource).filter(s=>{var a;return!e||s.id===e||((a=s==null?void 0:s.partOf)==null?void 0:a.reference.endsWith(e))});console.log("root",e,r);const t=l.entry.map(s=>s.fullUrl).filter(s=>s.startsWith("https://")).map(Vt);let n=at.uniq(t);n.length>1&&(console.log("Can't determine base URL",n),n=[]);const o=n[0];console.log("base",o);const i=r.map(s=>Mt(s));return{baseUrl:o,brands:Object.fromEntries(i.map(s=>[s.id,s]))}}function Ft(l,e,r){var i,s,a,f,p,u,c,m,$,b,N,z;const t=l[e],n=l[t.parentId],o={fullUrl:`${r}/Organization/${e}`,resource:{resourceType:"Organization",id:e,extension:[...t!=null&&t.logo?[{url:"http://hl7.org/fhir/StructureDefinition/organization-brand",extension:[{url:"brandLogo",valueUrl:t.logo}]}]:[],...(t==null?void 0:t.portalInherit.website)||(t==null?void 0:t.portal.website)?[{url:"http://hl7.org/fhir/StructureDefinition/organization-portal",extension:[...((i=t==null?void 0:t.portal)==null?void 0:i.website)||((s=n==null?void 0:n.portal)==null?void 0:s.website)?[{url:"portalUrl",valueUrl:((a=t==null?void 0:t.portal)==null?void 0:a.website)||((f=n==null?void 0:n.portal)==null?void 0:f.website)}]:[],...((p=t==null?void 0:t.portal)==null?void 0:p.description)||((u=n==null?void 0:n.portal)==null?void 0:u.description)?[{url:"portalDescription",valueMarkdown:((c=t==null?void 0:t.portal)==null?void 0:c.description)||((m=n==null?void 0:n.portal)==null?void 0:m.description)}]:[],...(($=t==null?void 0:t.portal)==null?void 0:$.name)||((b=n==null?void 0:n.portal)==null?void 0:b.name)?[{url:"portalName",valueString:((N=t==null?void 0:t.portal)==null?void 0:N.name)||((z=n==null?void 0:n.portal)==null?void 0:z.name)}]:[]]}]:[]],name:t.name,partOf:t.parentId?{reference:`Organization/${t.parentId}`}:void 0,alias:t.alias,address:(t.locations||[]).map(A=>({line:A==null?void 0:A.line,city:A==null?void 0:A.city,state:A==null?void 0:A.state,postalCode:A==null?void 0:A.postalCode})),telecom:[{system:"url",value:t.website}],identifier:[...Fe(t==null?void 0:t.website)?[{system:"urn:ietf:rfc:3986",value:Fe(t==null?void 0:t.website)}]:[]],type:((t==null?void 0:t.categories)||[]).map(A=>({coding:[{system:"http://terminology.hl7.org/CodeSystem/organization-type",code:A}]}))}};return["alias","address","extension","identifier","type"].forEach(A=>{var j,F;((F=(j=o==null?void 0:o.resource)==null?void 0:j[A])==null?void 0:F.length)===0&&delete o.resource[A]}),o}function Gt(l,e){return{resourceType:"Bundle",type:"collection",timestamp:new Date().toISOString(),entry:Object.entries(l).map(([r,t])=>Ft(l,r,e))}}function Ge(l,e,r){const t=l.slice();return t[11]=e[r][0],t[12]=e[r][1],t}function Ht(l){let e,r,t,n,o;return{c(){e=C("h1"),r=P("SMART Patient Access: Brand Editor ("),t=C("a"),n=P("?"),o=P(")"),this.h()},l(i){e=S(i,"H1",{class:!0});var s=V(e);r=O(s,"SMART Patient Access: Brand Editor ("),t=S(s,"A",{target:!0,href:!0});var a=V(t);n=O(a,"?"),a.forEach(d),o=O(s,")"),s.forEach(d),this.h()},h(){L(t,"target","_blank"),L(t,"href","https://hackmd.io/@argonaut/patient-access-brands"),L(e,"class","svelte-1ggurck")},m(i,s){h(i,e,s),U(e,r),U(e,t),U(t,n),U(e,o)},d(i){i&&d(e)}}}function Wt(l){let e,r;return e=new pe({props:{sm:4,$$slots:{default:[Ht]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&32768&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Jt(l){let e,r,t;return e=new vt({props:{brand:l[12],parentBrand:l[0][l[12].parentId]}}),e.$on("add-affiliated-brand",function(){Ae(l[4](l[11]))&&l[4](l[11]).apply(this,arguments)}),e.$on("remove-affiliated-brand",function(){Ae(l[5](l[11]))&&l[5](l[11]).apply(this,arguments)}),{c(){I(e.$$.fragment),r=T()},l(n){y(e.$$.fragment,n),r=D(n)},m(n,o){B(e,n,o),h(n,r,o),t=!0},p(n,o){l=n;const i={};o&1&&(i.brand=l[12]),o&1&&(i.parentBrand=l[0][l[12].parentId]),e.$set(i)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){E(e,n),n&&d(r)}}}function He(l){let e,r;return e=new pe({props:{class:"tile-column",sm:4,$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&32769&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Kt(l){let e,r,t=Object.entries(l[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=He(Ge(l,t,i));const o=i=>w(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=H()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=H()},m(i,s){for(let a=0;a<n.length;a+=1)n[a].m(i,s);h(i,e,s),r=!0},p(i,s){if(s&49){t=Object.entries(i[0]);let a;for(a=0;a<t.length;a+=1){const f=Ge(i,t,a);n[a]?(n[a].p(f,s),g(n[a],1)):(n[a]=He(f),n[a].c(),g(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);re()}},i(i){if(!r){for(let s=0;s<t.length;s+=1)g(n[s]);r=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);r=!1},d(i){ye(n,i),i&&d(e)}}}function Qt(l){let e,r;return e=new he({props:{$$slots:{default:[Kt]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&32769&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Xt(l){let e,r;return e=new ke({props:{noGutter:!0,$$slots:{default:[Qt]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&32769&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function We(l){let e,r,t;function n(i){l[7](i)}let o={brands:l[0]};return l[0][l[2].id]!==void 0&&(o.brand=l[0][l[2].id]),e=new zt({props:o}),J.push(()=>K(e,"brand",n)),{c(){I(e.$$.fragment)},l(i){y(e.$$.fragment,i)},m(i,s){B(e,i,s),t=!0},p(i,s){const a={};s&1&&(a.brands=i[0]),!r&&s&5&&(r=!0,a.brand=i[0][i[2].id],Q(()=>r=!1)),e.$set(a)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function Yt(l){let e=l[2].id,r,t,n=We(l);return{c(){n.c(),r=H()},l(o){n.l(o),r=H()},m(o,i){n.m(o,i),h(o,r,i),t=!0},p(o,i){i&4&&be(e,e=o[2].id)?(te(),w(n,1,1,ut),re(),n=We(o),n.c(),g(n),n.m(r.parentNode,r)):n.p(o,i)},i(o){t||(g(n),t=!0)},o(o){w(n),t=!1},d(o){o&&d(r),n.d(o)}}}function Zt(l){let e;return{c(){e=P("Preview")},l(r){e=O(r,"Preview")},m(r,t){h(r,e,t)},d(r){r&&d(e)}}}function xt(l){let e,r,t,n,o,i,s,a;return o=new pt({props:{text:l[1],feedback:"Copied Brand Bundle to clipboard"}}),s=new ce({props:{style:"width: .5rem;",$$slots:{default:[Zt]},$$scope:{ctx:l}}}),s.$on("click",l[3]),{c(){e=C("pre"),r=P(l[1]),t=T(),n=C("span"),I(o.$$.fragment),i=T(),I(s.$$.fragment),this.h()},l(f){e=S(f,"PRE",{style:!0});var p=V(e);r=O(p,l[1]),p.forEach(d),t=D(f),n=S(f,"SPAN",{style:!0});var u=V(n);y(o.$$.fragment,u),i=D(u),y(s.$$.fragment,u),u.forEach(d),this.h()},h(){q(e,"overflow-x","clip"),q(e,"margin-bottom","1em"),q(n,"position","absolute"),q(n,"top","0px"),q(n,"right","1rem")},m(f,p){h(f,e,p),U(e,r),h(f,t,p),h(f,n,p),B(o,n,null),U(n,i),B(s,n,null),a=!0},p(f,p){(!a||p&2)&&ne(r,f[1]);const u={};p&2&&(u.text=f[1]),o.$set(u);const c={};p&32768&&(c.$$scope={dirty:p,ctx:f}),s.$set(c)},i(f){a||(g(o.$$.fragment,f),g(s.$$.fragment,f),a=!0)},o(f){w(o.$$.fragment,f),w(s.$$.fragment,f),a=!1},d(f){f&&d(e),f&&d(t),f&&d(n),E(o),E(s)}}}function er(l){let e,r,t,n,o,i;return e=new pe({props:{lg:4,sm:4,style:"margin-bottom: 1em;",$$slots:{default:[Xt]},$$scope:{ctx:l}}}),t=new pe({props:{lg:8,sm:4,$$slots:{default:[Yt]},$$scope:{ctx:l}}}),o=new pe({props:{style:"position: relative;",lg:4,sm:4,$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment),r=T(),I(t.$$.fragment),n=T(),I(o.$$.fragment)},l(s){y(e.$$.fragment,s),r=D(s),y(t.$$.fragment,s),n=D(s),y(o.$$.fragment,s)},m(s,a){B(e,s,a),h(s,r,a),B(t,s,a),h(s,n,a),B(o,s,a),i=!0},p(s,a){const f={};a&32769&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const p={};a&32773&&(p.$$scope={dirty:a,ctx:s}),t.$set(p);const u={};a&32770&&(u.$$scope={dirty:a,ctx:s}),o.$set(u)},i(s){i||(g(e.$$.fragment,s),g(t.$$.fragment,s),g(o.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(t.$$.fragment,s),w(o.$$.fragment,s),i=!1},d(s){E(e,s),s&&d(r),E(t,s),s&&d(n),E(o,s)}}}function tr(l){let e,r,t,n;return e=new he({props:{$$slots:{default:[Wt]},$$scope:{ctx:l}}}),t=new he({props:{$$slots:{default:[er]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment),r=T(),I(t.$$.fragment)},l(o){y(e.$$.fragment,o),r=D(o),y(t.$$.fragment,o)},m(o,i){B(e,o,i),h(o,r,i),B(t,o,i),n=!0},p(o,i){const s={};i&32768&&(s.$$scope={dirty:i,ctx:o}),e.$set(s);const a={};i&32775&&(a.$$scope={dirty:i,ctx:o}),t.$set(a)},i(o){n||(g(e.$$.fragment,o),g(t.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),w(t.$$.fragment,o),n=!1},d(o){E(e,o),o&&d(r),E(t,o)}}}function rr(l){let e,r;return e=new ke({props:{$$slots:{default:[tr]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,[n]){const o={};n&32775&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}const nr="https://ehr.example.org";function lr(l,e,r){let t;Je(l,se,$=>r(2,t=$));let n={id:De(),name:"TODO: Add a name"},o={},i=nr;ft(async()=>{const $=new URLSearchParams(window.location.search),b=$.get("base"),N=$.get("source"),z=$.get("root");if(b&&r(6,i=b),N){let A=await fetch(N).then(F=>F.json()),j=jt(A,z);r(6,i=j.baseUrl),r(0,o=j.brands)}else r(0,o={[n.id]:fe({},n)});a()});function s(){const $=window.open("https://brand-browser.argo.run/config"),b=N=>{console.log("submitting",N.data),$.postMessage(JSON.parse(f),"*"),$.postMessage("done","*"),window.removeEventListener("message",b)};window.addEventListener("message",b)}function a(){let $=Object.values(o);$.length!==0&&($.length===1?ue(se,t={id:$[0].id},t):ue(se,t={id:$.filter(b=>!b.parentId)[0].id},t))}let f="",p=Rt();function u($){return b=>{const N=de(fe({},n),{id:De(),parentId:$});r(0,o=de(fe({},o),{[N.id]:N})),ue(se,t={id:N.id},t)}}function c($){return b=>{r(0,o=Object.fromEntries(Object.entries(o).filter(([N,z])=>N!==$)))}}function m($){l.$$.not_equal(o[t.id],$)&&(o[t.id]=$,r(0,o))}return l.$$.update=()=>{l.$$.dirty&65&&p(()=>{r(1,f=JSON.stringify(Gt(o,i||"https://ehr.example.org"),null,2))},200)},[o,f,t,s,u,c,i,m]}class or extends we{constructor(e){super();ve(this,e,lr,rr,be,{})}}export{or as default};
