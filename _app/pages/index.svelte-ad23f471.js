var Ke=Object.defineProperty,Qe=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var Ee=(i,e,r)=>e in i?Ke(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,fe=(i,e)=>{for(var r in e||(e={}))Ye.call(e,r)&&Ee(i,r,e[r]);if(Ue)for(var r of Ue(e))Ze.call(e,r)&&Ee(i,r,e[r]);return i},_e=(i,e)=>Qe(i,Xe(e));import{D as xe,S as we,i as ve,s as ge,L as et,t as N,k as D,w as I,l as H,h as O,m as A,x as y,g,y as B,j as ne,n as te,o as w,p as re,q as h,d,B as U,M as Je,N as tt,O as ke,P as rt,e as P,c as C,a as L,b as V,Q as de,J as E,R as ue,T as he,U as be,V as Ie,f as F,W as nt,X as lt,Y as ee,E as Te,Z as J,_ as it,$ as oe,a0 as K,a1 as Q,a2 as ye,a3 as st,a4 as ot,a5 as Be,a6 as at,a7 as De,v as ft,a8 as pe,K as ut,a9 as pt,aa as Ae}from"../chunks/vendor-661259fa.js";const se=xe({id:null});function ct(i){var u,m,p,$,b,R;let e,r,t=(((m=(u=i[0])==null?void 0:u.portalInherit)!=null&&m.name?($=(p=i[1])==null?void 0:p.portal)==null?void 0:$.name:(R=(b=i[0])==null?void 0:b.portal)==null?void 0:R.name)||"TODO: Add portal name, URL, and description")+"",n,o,l,s,a,f,c;return{c(){e=P("div"),r=P("p"),n=N(t),o=D(),l=P("button"),s=N("View data"),a=D(),f=P("button"),c=N("Connect"),this.h()},l(S){e=C(S,"DIV",{style:!0});var T=L(e);r=C(T,"P",{style:!0});var M=L(r);n=O(M,t),M.forEach(d),o=A(T),l=C(T,"BUTTON",{class:!0,kind:!0});var G=L(l);s=O(G,"View data"),G.forEach(d),a=A(T),f=C(T,"BUTTON",{class:!0,kind:!0});var j=L(f);c=O(j,"Connect"),j.forEach(d),T.forEach(d),this.h()},h(){F(r,"font-size",".8rem"),F(r,"margin-top",".5em"),V(l,"class","example svelte-1g6h6zr"),V(l,"kind","primary"),V(f,"class","example svelte-1g6h6zr"),V(f,"kind","primary"),F(e,"margin-left","1em"),F(e,"margin-right","1em"),F(e,"display","flex"),F(e,"align-items","self-end")},m(S,T){g(S,e,T),E(e,r),E(r,n),E(e,o),E(e,l),E(l,s),E(e,a),E(e,f),E(f,c)},p(S,T){var M,G,j,Y,W,Z;T&3&&t!==(t=(((G=(M=S[0])==null?void 0:M.portalInherit)!=null&&G.name?(Y=(j=S[1])==null?void 0:j.portal)==null?void 0:Y.name:(Z=(W=S[0])==null?void 0:W.portal)==null?void 0:Z.name)||"TODO: Add portal name, URL, and description")+"")&&ne(n,t)},d(S){S&&d(e)}}}function mt(i){let e,r;return e=new he({props:{$$slots:{default:[ct]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&259&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function $t(i){let e,r,t,n,o=i[0].name+"",l,s,a,f,c,u,m;return f=new ke({props:{noGutter:!0,$$slots:{default:[mt]},$$scope:{ctx:i}}}),u=new rt({props:{style:"cursor: pointer; position: absolute; top: 0%; right: 0%;"}}),u.$on("click",i[4]),{c(){e=P("h3"),r=P("img"),n=D(),l=N(o),s=N(`
    \xA0`),a=D(),I(f.$$.fragment),c=D(),I(u.$$.fragment),this.h()},l(p){e=C(p,"H3",{class:!0});var $=L(e);r=C($,"IMG",{alt:!0,class:!0,src:!0}),n=A($),l=O($,o),s=O($,`
    \xA0`),$.forEach(d),a=A(p),y(f.$$.fragment,p),c=A(p),y(u.$$.fragment,p),this.h()},h(){var p;V(r,"alt","logo"),V(r,"class","logo svelte-1g6h6zr"),de(r.src,t=(p=i[0].logo)!=null?p:"smart-burst.svg")||V(r,"src",t),V(e,"class","name svelte-1g6h6zr")},m(p,$){g(p,e,$),E(e,r),E(e,n),E(e,l),E(e,s),g(p,a,$),B(f,p,$),g(p,c,$),B(u,p,$),m=!0},p(p,$){var R;(!m||$&1&&!de(r.src,t=(R=p[0].logo)!=null?R:"smart-burst.svg"))&&V(r,"src",t),(!m||$&1)&&o!==(o=p[0].name+"")&&ne(l,o);const b={};$&259&&(b.$$scope={dirty:$,ctx:p}),f.$set(b)},i(p){m||(h(f.$$.fragment,p),h(u.$$.fragment,p),m=!0)},o(p){w(f.$$.fragment,p),w(u.$$.fragment,p),m=!1},d(p){p&&d(e),p&&d(a),U(f,p),p&&d(c),U(u,p)}}}function _t(i){let e,r;return e=new be({props:{small:!0,style:"display: flex; align-items: centered; padding-left: 1em; padding-right: 1em; width: 100%; max-width: unset; min-height: 2rem; gap: 1em;",kind:"danger-tertiary",$$slots:{default:[ht]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&256&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function dt(i){let e,r;return e=new be({props:{small:!0,style:"display: flex; align-items: centered; padding-left: 1em; padding-right: 1em; width: 100%; max-width: unset; min-height: 2rem; gap: 1em;",kind:"tertiary",$$slots:{default:[gt]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&256&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function ht(i){let e,r,t,n,o;return e=new Ie({}),{c(){I(e.$$.fragment),r=D(),t=P("div"),n=N("Remove affiliated brand"),this.h()},l(l){y(e.$$.fragment,l),r=A(l),t=C(l,"DIV",{style:!0});var s=L(t);n=O(s,"Remove affiliated brand"),s.forEach(d),this.h()},h(){F(t,"flex-grow","1")},m(l,s){B(e,l,s),g(l,r,s),g(l,t,s),E(t,n),o=!0},i(l){o||(h(e.$$.fragment,l),o=!0)},o(l){w(e.$$.fragment,l),o=!1},d(l){U(e,l),l&&d(r),l&&d(t)}}}function gt(i){let e,r,t,n,o;return e=new nt({}),{c(){I(e.$$.fragment),r=D(),t=P("div"),n=N("Add affiliated brand"),this.h()},l(l){y(e.$$.fragment,l),r=A(l),t=C(l,"DIV",{style:!0});var s=L(t);n=O(s,"Add affiliated brand"),s.forEach(d),this.h()},h(){F(t,"flex-grow","1")},m(l,s){B(e,l,s),g(l,r,s),g(l,t,s),E(t,n),o=!0},i(l){o||(h(e.$$.fragment,l),o=!0)},o(l){w(e.$$.fragment,l),o=!1},d(l){U(e,l),l&&d(r),l&&d(t)}}}function bt(i){var p;let e="",r,t,n,o,l,s,a,f;n=new et({props:{class:"tile",style:`opacity: ${((p=i[2])==null?void 0:p.id)!==null&&i[2].id!==i[0].id?"50":100}%`,$$slots:{default:[$t]},$$scope:{ctx:i}}}),n.$on("click",i[5]);const c=[dt,_t],u=[];function m($,b){return $[0].parentId?1:0}return l=m(i),s=u[l]=c[l](i),{c(){r=N(e),t=D(),I(n.$$.fragment),o=D(),s.c(),a=H()},l($){r=O($,e),t=A($),y(n.$$.fragment,$),o=A($),s.l($),a=H()},m($,b){g($,r,b),g($,t,b),B(n,$,b),g($,o,b),u[l].m($,b),g($,a,b),f=!0},p($,[b]){var T;(!f||b&1)&&e!==(e="")&&ne(r,e);const R={};b&5&&(R.style=`opacity: ${((T=$[2])==null?void 0:T.id)!==null&&$[2].id!==$[0].id?"50":100}%`),b&263&&(R.$$scope={dirty:b,ctx:$}),n.$set(R);let S=l;l=m($),l===S?u[l].p($,b):(te(),w(u[S],1,1,()=>{u[S]=null}),re(),s=u[l],s?s.p($,b):(s=u[l]=c[l]($),s.c()),h(s,1),s.m(a.parentNode,a))},i($){f||(h(n.$$.fragment,$),h(s),f=!0)},o($){w(n.$$.fragment,$),w(s),f=!1},d($){$&&d(r),$&&d(t),U(n,$),$&&d(o),u[l].d($),$&&d(a)}}}function wt(i,e,r){let t;Je(i,se,u=>r(2,t=u));const n=tt();let{brand:o}=e,{parentBrand:l}=e;const s=()=>{ue(se,t={id:o.id},t),console.log("Editing",o.id)},a=()=>{ue(se,t={id:o.id},t),console.log("Editing",o.id)},f=()=>{n("add-affiliated-brand",o)},c=()=>{n("remove-affiliated-brand",o)};return i.$$set=u=>{"brand"in u&&r(0,o=u.brand),"parentBrand"in u&&r(1,l=u.parentBrand)},[o,l,t,n,s,a,f,c]}class vt extends we{constructor(e){super();ve(this,e,wt,bt,ge,{brand:0,parentBrand:1})}}function Ne(i,e,r){const t=i.slice();return t[28]=e[r],t[29]=e,t[30]=r,t}function Oe(i,e,r){const t=i.slice();return t[31]=e[r],t[32]=e,t[30]=r,t}function Pe(i){let e,r;return e=new lt({props:{$$slots:{default:[Pt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n[0]&63|n[1]&4&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function kt(i){let e,r,t,n,o,l;function s(f){i[9](f)}let a={autofocus:!0,invalid:i[0].name=="",placeholder:"Associated Physicians of Madison"};return i[0].name!==void 0&&(a.value=i[0].name),n=new oe({props:a}),J.push(()=>K(n,"value",s)),{c(){e=P("div"),r=N("The primary name associated with your brand."),t=D(),I(n.$$.fragment),this.h()},l(f){e=C(f,"DIV",{class:!0});var c=L(e);r=O(c,"The primary name associated with your brand."),c.forEach(d),t=A(f),y(n.$$.fragment,f),this.h()},h(){V(e,"class","bx--form__helper-text")},m(f,c){g(f,e,c),E(e,r),g(f,t,c),B(n,f,c),l=!0},p(f,c){const u={};c[0]&1&&(u.invalid=f[0].name==""),!o&&c[0]&1&&(o=!0,u.value=f[0].name,Q(()=>o=!1)),n.$set(u)},i(f){l||(h(n.$$.fragment,f),l=!0)},o(f){w(n.$$.fragment,f),l=!1},d(f){f&&d(e),f&&d(t),U(n,f)}}}function It(i){var f,c;let e,r,t,n,o,l;function s(u){i[10](u)}let a={invalid:!((c=(f=i[0])==null?void 0:f.website)!=null&&c.startsWith("https://")),placeholder:"https://apmadison.com"};return i[0].website!==void 0&&(a.value=i[0].website),n=new oe({props:a}),J.push(()=>K(n,"value",s)),{c(){e=P("div"),r=N(`The primary website associated with your brand. Note: this is distinct
        from your patient portal.`),t=D(),I(n.$$.fragment),this.h()},l(u){e=C(u,"DIV",{class:!0});var m=L(e);r=O(m,`The primary website associated with your brand. Note: this is distinct
        from your patient portal.`),m.forEach(d),t=A(u),y(n.$$.fragment,u),this.h()},h(){V(e,"class","bx--form__helper-text")},m(u,m){g(u,e,m),E(e,r),g(u,t,m),B(n,u,m),l=!0},p(u,m){var $,b;const p={};m[0]&1&&(p.invalid=!((b=($=u[0])==null?void 0:$.website)!=null&&b.startsWith("https://"))),!o&&m[0]&1&&(o=!0,p.value=u[0].website,Q(()=>o=!1)),n.$set(p)},i(u){l||(h(n.$$.fragment,u),l=!0)},o(u){w(n.$$.fragment,u),l=!1},d(u){u&&d(e),u&&d(t),U(n,u)}}}function Ce(i){let e,r,t,n,o,l,s;function a(m){i[11](m,i[30])}function f(m){i[12](m,i[30])}let c={invalid:i[0].alias[i[30]]=="",style:"width: 100%;",placeholder:"Madison Doctors Group"};i[0].alias[i[30]]!==void 0&&(c.value=i[0].alias[i[30]]),i[3][i[30]]!==void 0&&(c.ref=i[3][i[30]]),r=new oe({props:c}),J.push(()=>K(r,"value",a)),J.push(()=>K(r,"ref",f)),r.$on("keyup",i[13]);function u(){return i[14](i[30])}return l=new Ie({props:{style:"margin-left: .5em; cursor: pointer; min-width: 16px;"}}),l.$on("click",u),{c(){e=P("div"),I(r.$$.fragment),o=D(),I(l.$$.fragment),this.h()},l(m){e=C(m,"DIV",{style:!0});var p=L(e);y(r.$$.fragment,p),o=A(p),y(l.$$.fragment,p),p.forEach(d),this.h()},h(){F(e,"display","flex"),F(e,"align-items","baseline")},m(m,p){g(m,e,p),B(r,e,null),E(e,o),B(l,e,null),s=!0},p(m,p){i=m;const $={};p[0]&1&&($.invalid=i[0].alias[i[30]]==""),!t&&p[0]&1&&(t=!0,$.value=i[0].alias[i[30]],Q(()=>t=!1)),!n&&p[0]&8&&(n=!0,$.ref=i[3][i[30]],Q(()=>n=!1)),r.$set($)},i(m){s||(h(r.$$.fragment,m),h(l.$$.fragment,m),s=!0)},o(m){w(r.$$.fragment,m),w(l.$$.fragment,m),s=!1},d(m){m&&d(e),U(r),U(l)}}}function yt(i){let e;return{c(){e=N("Add alias")},l(r){e=O(r,"Add alias")},m(r,t){g(r,e,t)},d(r){r&&d(e)}}}function Bt(i){var c;let e,r,t,n,o,l,s=((c=i[0])==null?void 0:c.alias)||[],a=[];for(let u=0;u<s.length;u+=1)a[u]=Ce(Oe(i,s,u));const f=u=>w(a[u],1,1,()=>{a[u]=null});return o=new be({props:{small:!0,kind:"ghost",$$slots:{default:[yt]},$$scope:{ctx:i}}}),o.$on("click",i[6]),{c(){e=P("div"),r=N(`An alias associated with your Brand (e.g., a former name or other term
        patients might use to search for your brand)`),t=D();for(let u=0;u<a.length;u+=1)a[u].c();n=D(),I(o.$$.fragment),this.h()},l(u){e=C(u,"DIV",{class:!0});var m=L(e);r=O(m,`An alias associated with your Brand (e.g., a former name or other term
        patients might use to search for your brand)`),m.forEach(d),t=A(u);for(let p=0;p<a.length;p+=1)a[p].l(u);n=A(u),y(o.$$.fragment,u),this.h()},h(){V(e,"class","bx--form__helper-text")},m(u,m){g(u,e,m),E(e,r),g(u,t,m);for(let p=0;p<a.length;p+=1)a[p].m(u,m);g(u,n,m),B(o,u,m),l=!0},p(u,m){var $;if(m[0]&73){s=(($=u[0])==null?void 0:$.alias)||[];let b;for(b=0;b<s.length;b+=1){const R=Oe(u,s,b);a[b]?(a[b].p(R,m),h(a[b],1)):(a[b]=Ce(R),a[b].c(),h(a[b],1),a[b].m(n.parentNode,n))}for(te(),b=s.length;b<a.length;b+=1)f(b);re()}const p={};m[1]&4&&(p.$$scope={dirty:m,ctx:u}),o.$set(p)},i(u){if(!l){for(let m=0;m<s.length;m+=1)h(a[m]);h(o.$$.fragment,u),l=!0}},o(u){a=a.filter(Boolean);for(let m=0;m<a.length;m+=1)w(a[m]);w(o.$$.fragment,u),l=!1},d(u){u&&d(e),u&&d(t),ye(a,u),u&&d(n),U(o,u)}}}function Se(i){let e,r;return{c(){e=P("img"),this.h()},l(t){e=C(t,"IMG",{style:!0,alt:!0,src:!0}),this.h()},h(){F(e,"width","1em"),F(e,"height","1em"),V(e,"alt","logo"),de(e.src,r=i[0].logo)||V(e,"src",r)},m(t,n){g(t,e,n)},p(t,n){n[0]&1&&!de(e.src,r=t[0].logo)&&V(e,"src",r)},d(t){t&&d(e)}}}function Ut(i){let e,r,t,n=i[0].logo&&Se(i),o={buttonLabel:"Choose logo file",labelDescription:"Square PNG or SVG, 1024x1024 pixels with transparent background preferred",accept:[".png",".svg"],status:"complete"};return r=new st({props:o}),i[15](r),r.$on("change",i[16]),{c(){n&&n.c(),e=D(),I(r.$$.fragment)},l(l){n&&n.l(l),e=A(l),y(r.$$.fragment,l)},m(l,s){n&&n.m(l,s),g(l,e,s),B(r,l,s),t=!0},p(l,s){l[0].logo?n?n.p(l,s):(n=Se(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null);const a={};r.$set(a)},i(l){t||(h(r.$$.fragment,l),t=!0)},o(l){w(r.$$.fragment,l),t=!1},d(l){n&&n.d(l),l&&d(e),i[15](null),U(r,l)}}}function ze(i){let e,r,t,n,o,l,s;function a(m){i[17](m,i[28])}function f(m){i[18](m,i[30])}let c={invalid:Object.entries(i[0].locations[i[30]]).length===1,style:"width: 100%;",placeholder:"123 Regent St, Madison, WI 53726"};i[28].text!==void 0&&(c.value=i[28].text),i[4][i[30]]!==void 0&&(c.ref=i[4][i[30]]),r=new oe({props:c}),J.push(()=>K(r,"value",a)),J.push(()=>K(r,"ref",f)),r.$on("keyup",i[19]);function u(){return i[20](i[30])}return l=new Ie({props:{style:"margin-left: .5em; cursor: pointer; min-width: 16px;"}}),l.$on("click",u),{c(){e=P("div"),I(r.$$.fragment),o=D(),I(l.$$.fragment),this.h()},l(m){e=C(m,"DIV",{style:!0});var p=L(e);y(r.$$.fragment,p),o=A(p),y(l.$$.fragment,p),p.forEach(d),this.h()},h(){F(e,"display","flex"),F(e,"align-items","baseline")},m(m,p){g(m,e,p),B(r,e,null),E(e,o),B(l,e,null),s=!0},p(m,p){i=m;const $={};p[0]&1&&($.invalid=Object.entries(i[0].locations[i[30]]).length===1),!t&&p[0]&1&&(t=!0,$.value=i[28].text,Q(()=>t=!1)),!n&&p[0]&16&&(n=!0,$.ref=i[4][i[30]],Q(()=>n=!1)),r.$set($)},i(m){s||(h(r.$$.fragment,m),h(l.$$.fragment,m),s=!0)},o(m){w(r.$$.fragment,m),w(l.$$.fragment,m),s=!1},d(m){m&&d(e),U(r),U(l)}}}function Et(i){let e;return{c(){e=N("Add location")},l(r){e=O(r,"Add location")},m(r,t){g(r,e,t)},d(r){r&&d(e)}}}function Tt(i){let e,r,t,n,o,l,s=i[0].locations||[],a=[];for(let c=0;c<s.length;c+=1)a[c]=ze(Ne(i,s,c));const f=c=>w(a[c],1,1,()=>{a[c]=null});return o=new be({props:{small:!0,kind:"ghost",$$slots:{default:[Et]},$$scope:{ctx:i}}}),o.$on("click",i[7]),{c(){e=P("div"),r=N(`A location (street address, city/state, or city/state/zip) associated
        with your Brand`),t=D();for(let c=0;c<a.length;c+=1)a[c].c();n=D(),I(o.$$.fragment),this.h()},l(c){e=C(c,"DIV",{class:!0});var u=L(e);r=O(u,`A location (street address, city/state, or city/state/zip) associated
        with your Brand`),u.forEach(d),t=A(c);for(let m=0;m<a.length;m+=1)a[m].l(c);n=A(c),y(o.$$.fragment,c),this.h()},h(){V(e,"class","bx--form__helper-text")},m(c,u){g(c,e,u),E(e,r),g(c,t,u);for(let m=0;m<a.length;m+=1)a[m].m(c,u);g(c,n,u),B(o,c,u),l=!0},p(c,u){if(u[0]&145){s=c[0].locations||[];let p;for(p=0;p<s.length;p+=1){const $=Ne(c,s,p);a[p]?(a[p].p($,u),h(a[p],1)):(a[p]=ze($),a[p].c(),h(a[p],1),a[p].m(n.parentNode,n))}for(te(),p=s.length;p<a.length;p+=1)f(p);re()}const m={};u[1]&4&&(m.$$scope={dirty:u,ctx:c}),o.$set(m)},i(c){if(!l){for(let u=0;u<s.length;u+=1)h(a[u]);h(o.$$.fragment,c),l=!0}},o(c){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)w(a[u]);w(o.$$.fragment,c),l=!1},d(c){c&&d(e),c&&d(t),ye(a,c),c&&d(n),U(o,c)}}}function Dt(i){let e,r,t;function n(l){i[21](l)}let o={label:"Select categories",items:[{id:"prov",text:"Healthcare Provider"},{id:"ins",text:"Insurance Company"},{id:"laboratory",text:"Laboratory"},{id:"pharmacy",text:"Pharmacy"},{id:"imaging",text:"Imaging Center"},{id:"health-information-network",text:"Health Information Network"},{id:"health-data-aggregator",text:"Health Data Aggregator"}]};return i[0].categories!==void 0&&(o.selectedIds=i[0].categories),e=new ot({props:o}),J.push(()=>K(e,"selectedIds",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const a={};!r&&s[0]&1&&(r=!0,a.selectedIds=l[0].categories,Q(()=>r=!1)),e.$set(a)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Re(i){var f,c;let e,r,t,n=(((c=(f=i[5])==null?void 0:f.portal)==null?void 0:c.website)||"")+"",o,l,s,a;return{c(){e=P("div"),r=P("input"),t=N(`
          Use portal URL from Primary Brand ("`),o=N(n),l=N('")'),this.h()},l(u){e=C(u,"DIV",{});var m=L(e);r=C(m,"INPUT",{type:!0}),t=O(m,`
          Use portal URL from Primary Brand ("`),o=O(m,n),l=O(m,'")'),m.forEach(d),this.h()},h(){V(r,"type","checkbox")},m(u,m){g(u,e,m),E(e,r),r.checked=i[0].portalInherit.website,E(e,t),E(e,o),E(e,l),s||(a=Be(r,"change",i[22]),s=!0)},p(u,m){var p,$;m[0]&1&&(r.checked=u[0].portalInherit.website),m[0]&32&&n!==(n=((($=(p=u[5])==null?void 0:p.portal)==null?void 0:$.website)||"")+"")&&ne(o,n)},d(u){u&&d(e),s=!1,a()}}}function Ve(i){var l,s,a;let e,r,t;function n(f){i[23](f)}let o={invalid:!((a=(s=(l=i[0])==null?void 0:l.portal)==null?void 0:s.website)!=null&&a.startsWith("https://")),placeholder:"https://www.chart.myunitypoint.org/"};return i[0].portal.website!==void 0&&(o.value=i[0].portal.website),e=new oe({props:o}),J.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(f){y(e.$$.fragment,f)},m(f,c){B(e,f,c),t=!0},p(f,c){var m,p,$;const u={};c[0]&1&&(u.invalid=!(($=(p=(m=f[0])==null?void 0:m.portal)==null?void 0:p.website)!=null&&$.startsWith("https://"))),!r&&c[0]&1&&(r=!0,u.value=f[0].portal.website,Q(()=>r=!1)),e.$set(u)},i(f){t||(h(e.$$.fragment,f),t=!0)},o(f){w(e.$$.fragment,f),t=!1},d(f){U(e,f)}}}function At(i){let e,r,t,n,o,l,s=i[1]&&Re(i),a=(!i[1]||!i[0].portalInherit.website)&&Ve(i);return{c(){e=P("div"),r=N("URL of patient portal where records are available (https only)"),t=D(),s&&s.c(),n=D(),a&&a.c(),o=H(),this.h()},l(f){e=C(f,"DIV",{class:!0});var c=L(e);r=O(c,"URL of patient portal where records are available (https only)"),c.forEach(d),t=A(f),s&&s.l(f),n=A(f),a&&a.l(f),o=H(),this.h()},h(){V(e,"class","bx--form__helper-text")},m(f,c){g(f,e,c),E(e,r),g(f,t,c),s&&s.m(f,c),g(f,n,c),a&&a.m(f,c),g(f,o,c),l=!0},p(f,c){f[1]?s?s.p(f,c):(s=Re(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.website?a?(a.p(f,c),c[0]&3&&h(a,1)):(a=Ve(f),a.c(),h(a,1),a.m(o.parentNode,o)):a&&(te(),w(a,1,1,()=>{a=null}),re())},i(f){l||(h(a),l=!0)},o(f){w(a),l=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),a&&a.d(f),f&&d(o)}}}function Le(i){var f,c;let e,r,t,n=(((c=(f=i[5])==null?void 0:f.portal)==null?void 0:c.name)||"")+"",o,l,s,a;return{c(){e=P("div"),r=P("input"),t=N(` Use
          name from Primary Brand ("`),o=N(n),l=N('")'),this.h()},l(u){e=C(u,"DIV",{});var m=L(e);r=C(m,"INPUT",{type:!0}),t=O(m,` Use
          name from Primary Brand ("`),o=O(m,n),l=O(m,'")'),m.forEach(d),this.h()},h(){V(r,"type","checkbox")},m(u,m){g(u,e,m),E(e,r),r.checked=i[0].portalInherit.name,E(e,t),E(e,o),E(e,l),s||(a=Be(r,"change",i[24]),s=!0)},p(u,m){var p,$;m[0]&1&&(r.checked=u[0].portalInherit.name),m[0]&32&&n!==(n=((($=(p=u[5])==null?void 0:p.portal)==null?void 0:$.name)||"")+"")&&ne(o,n)},d(u){u&&d(e),s=!1,a()}}}function qe(i){let e,r,t;function n(l){i[25](l)}let o={invalid:!1,placeholder:"MyUnityPoint"};return i[0].portal.name!==void 0&&(o.value=i[0].portal.name),e=new oe({props:o}),J.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const a={};s[0]&1&&(a.invalid=!1),!r&&s[0]&1&&(r=!0,a.value=l[0].portal.name,Q(()=>r=!1)),e.$set(a)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Nt(i){let e,r,t,n,o,l,s=i[1]&&Le(i),a=(!i[1]||!i[0].portalInherit.name)&&qe(i);return{c(){e=P("div"),r=N("Name of the portal as known to patients"),t=D(),s&&s.c(),n=D(),a&&a.c(),o=H(),this.h()},l(f){e=C(f,"DIV",{class:!0});var c=L(e);r=O(c,"Name of the portal as known to patients"),c.forEach(d),t=A(f),s&&s.l(f),n=A(f),a&&a.l(f),o=H(),this.h()},h(){V(e,"class","bx--form__helper-text")},m(f,c){g(f,e,c),E(e,r),g(f,t,c),s&&s.m(f,c),g(f,n,c),a&&a.m(f,c),g(f,o,c),l=!0},p(f,c){f[1]?s?s.p(f,c):(s=Le(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.name?a?(a.p(f,c),c[0]&3&&h(a,1)):(a=qe(f),a.c(),h(a,1),a.m(o.parentNode,o)):a&&(te(),w(a,1,1,()=>{a=null}),re())},i(f){l||(h(a),l=!0)},o(f){w(a),l=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),a&&a.d(f),f&&d(o)}}}function Me(i){var f,c;let e,r,t,n=(c=(f=i[5])==null?void 0:f.portal)!=null&&c.description?i[5].portal.description.slice(40)+"...":"",o,l,s,a;return{c(){e=P("div"),r=P("input"),t=N(`
          Use description from Primary Brand ("`),o=N(n),l=N('")'),this.h()},l(u){e=C(u,"DIV",{});var m=L(e);r=C(m,"INPUT",{type:!0}),t=O(m,`
          Use description from Primary Brand ("`),o=O(m,n),l=O(m,'")'),m.forEach(d),this.h()},h(){V(r,"type","checkbox")},m(u,m){g(u,e,m),E(e,r),r.checked=i[0].portalInherit.description,E(e,t),E(e,o),E(e,l),s||(a=Be(r,"change",i[26]),s=!0)},p(u,m){var p,$;m[0]&1&&(r.checked=u[0].portalInherit.description),m[0]&32&&n!==(n=($=(p=u[5])==null?void 0:p.portal)!=null&&$.description?u[5].portal.description.slice(40)+"...":"")&&ne(o,n)},d(u){u&&d(e),s=!1,a()}}}function je(i){let e,r,t;function n(l){i[27](l)}let o={invalid:!1,placeholder:"Access your clinical records..."};return i[0].portal.description!==void 0&&(o.value=i[0].portal.description),e=new oe({props:o}),J.push(()=>K(e,"value",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const a={};s[0]&1&&(a.invalid=!1),!r&&s[0]&1&&(r=!0,a.value=l[0].portal.description,Q(()=>r=!1)),e.$set(a)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ot(i){let e,r,t,n,o,l,s=i[1]&&Me(i),a=(!i[1]||!i[0].portalInherit.description)&&je(i);return{c(){e=P("div"),r=N(`Description of the portal to help patients connect to the right place.
        Explain the intended audience of the portal, if you offer more than one
        portal for different audiences.`),t=D(),s&&s.c(),n=D(),a&&a.c(),o=H(),this.h()},l(f){e=C(f,"DIV",{class:!0});var c=L(e);r=O(c,`Description of the portal to help patients connect to the right place.
        Explain the intended audience of the portal, if you offer more than one
        portal for different audiences.`),c.forEach(d),t=A(f),s&&s.l(f),n=A(f),a&&a.l(f),o=H(),this.h()},h(){V(e,"class","bx--form__helper-text")},m(f,c){g(f,e,c),E(e,r),g(f,t,c),s&&s.m(f,c),g(f,n,c),a&&a.m(f,c),g(f,o,c),l=!0},p(f,c){f[1]?s?s.p(f,c):(s=Me(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),!f[1]||!f[0].portalInherit.description?a?(a.p(f,c),c[0]&3&&h(a,1)):(a=je(f),a.c(),h(a,1),a.m(o.parentNode,o)):a&&(te(),w(a,1,1,()=>{a=null}),re())},i(f){l||(h(a),l=!0)},o(f){w(a),l=!1},d(f){f&&d(e),f&&d(t),s&&s.d(f),f&&d(n),a&&a.d(f),f&&d(o)}}}function Pt(i){let e,r=`${i[1]?"Affiliated":"Primary"} Brand Details`,t,n,o,l,s,a,f,c,u,m,p,$,b,R,S,T="Patient Portal Details",M,G,j,Y,W,Z,X,le;return o=new ee({props:{legendText:"Brand name",$$slots:{default:[kt]},$$scope:{ctx:i}}}),s=new ee({props:{legendText:"Brand website (https only)",$$slots:{default:[It]},$$scope:{ctx:i}}}),f=new ee({props:{legendText:"Brand aliases (optional)",$$slots:{default:[Bt]},$$scope:{ctx:i}}}),u=new ee({props:{legendText:"Brand logo",$$slots:{default:[Ut]},$$scope:{ctx:i}}}),p=new ee({props:{legendText:"Locations (optional)",$$slots:{default:[Tt]},$$scope:{ctx:i}}}),b=new ee({props:{legendText:"Categories (optional)",$$slots:{default:[Dt]},$$scope:{ctx:i}}}),j=new ee({props:{legendText:"Portal URL",$$slots:{default:[At]},$$scope:{ctx:i}}}),W=new ee({props:{legendText:"Portal name",$$slots:{default:[Nt]},$$scope:{ctx:i}}}),X=new ee({props:{legendText:"Portal description",$$slots:{default:[Ot]},$$scope:{ctx:i}}}),{c(){e=P("h5"),t=N(r),n=D(),I(o.$$.fragment),l=D(),I(s.$$.fragment),a=D(),I(f.$$.fragment),c=D(),I(u.$$.fragment),m=D(),I(p.$$.fragment),$=D(),I(b.$$.fragment),R=D(),S=P("h5"),M=N(T),G=D(),I(j.$$.fragment),Y=D(),I(W.$$.fragment),Z=D(),I(X.$$.fragment)},l(_){e=C(_,"H5",{});var v=L(e);t=O(v,r),v.forEach(d),n=A(_),y(o.$$.fragment,_),l=A(_),y(s.$$.fragment,_),a=A(_),y(f.$$.fragment,_),c=A(_),y(u.$$.fragment,_),m=A(_),y(p.$$.fragment,_),$=A(_),y(b.$$.fragment,_),R=A(_),S=C(_,"H5",{});var ie=L(S);M=O(ie,T),ie.forEach(d),G=A(_),y(j.$$.fragment,_),Y=A(_),y(W.$$.fragment,_),Z=A(_),y(X.$$.fragment,_)},m(_,v){g(_,e,v),E(e,t),g(_,n,v),B(o,_,v),g(_,l,v),B(s,_,v),g(_,a,v),B(f,_,v),g(_,c,v),B(u,_,v),g(_,m,v),B(p,_,v),g(_,$,v),B(b,_,v),g(_,R,v),g(_,S,v),E(S,M),g(_,G,v),B(j,_,v),g(_,Y,v),B(W,_,v),g(_,Z,v),B(X,_,v),le=!0},p(_,v){(!le||v[0]&2)&&r!==(r=`${_[1]?"Affiliated":"Primary"} Brand Details`)&&ne(t,r);const ie={};v[0]&1|v[1]&4&&(ie.$$scope={dirty:v,ctx:_}),o.$set(ie);const ce={};v[0]&1|v[1]&4&&(ce.$$scope={dirty:v,ctx:_}),s.$set(ce);const k={};v[0]&9|v[1]&4&&(k.$$scope={dirty:v,ctx:_}),f.$set(k);const z={};v[0]&5|v[1]&4&&(z.$$scope={dirty:v,ctx:_}),u.$set(z);const q={};v[0]&17|v[1]&4&&(q.$$scope={dirty:v,ctx:_}),p.$set(q);const x={};v[0]&1|v[1]&4&&(x.$$scope={dirty:v,ctx:_}),b.$set(x);const me={};v[0]&35|v[1]&4&&(me.$$scope={dirty:v,ctx:_}),j.$set(me);const $e={};v[0]&35|v[1]&4&&($e.$$scope={dirty:v,ctx:_}),W.$set($e);const ae={};v[0]&35|v[1]&4&&(ae.$$scope={dirty:v,ctx:_}),X.$set(ae)},i(_){le||(h(o.$$.fragment,_),h(s.$$.fragment,_),h(f.$$.fragment,_),h(u.$$.fragment,_),h(p.$$.fragment,_),h(b.$$.fragment,_),h(j.$$.fragment,_),h(W.$$.fragment,_),h(X.$$.fragment,_),le=!0)},o(_){w(o.$$.fragment,_),w(s.$$.fragment,_),w(f.$$.fragment,_),w(u.$$.fragment,_),w(p.$$.fragment,_),w(b.$$.fragment,_),w(j.$$.fragment,_),w(W.$$.fragment,_),w(X.$$.fragment,_),le=!1},d(_){_&&d(e),_&&d(n),U(o,_),_&&d(l),U(s,_),_&&d(a),U(f,_),_&&d(c),U(u,_),_&&d(m),U(p,_),_&&d($),U(b,_),_&&d(R),_&&d(S),_&&d(G),U(j,_),_&&d(Y),U(W,_),_&&d(Z),U(X,_)}}}function Ct(i){let e,r,t=i[0]&&Pe(i);return{c(){t&&t.c(),e=H()},l(n){t&&t.l(n),e=H()},m(n,o){t&&t.m(n,o),g(n,e,o),r=!0},p(n,o){n[0]?t?(t.p(n,o),o[0]&1&&h(t,1)):(t=Pe(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(te(),w(t,1,1,()=>{t=null}),re())},i(n){r||(h(t),r=!0)},o(n){w(t),r=!1},d(n){t&&t.d(n),n&&d(e)}}}function St(i,e,r){let{brand:t}=e,{brands:n}=e,o,l=[],s=[],a=!1,f;async function c(){r(0,t.alias=t.alias||[],t).push(""),await Te(),l.slice(-1)[0].focus()}async function u(){r(0,t.locations=[...t.locations,{text:""}],t),await Te(),s.slice(-1)[0].focus()}function m(k){i.$$.not_equal(t.name,k)&&(t.name=k,r(0,t),r(8,n),r(1,a))}function p(k){i.$$.not_equal(t.website,k)&&(t.website=k,r(0,t),r(8,n),r(1,a))}function $(k,z){i.$$.not_equal(t.alias[z],k)&&(t.alias[z]=k,r(0,t),r(8,n),r(1,a))}function b(k,z){i.$$.not_equal(l[z],k)&&(l[z]=k,r(3,l))}const R=async k=>{k.key==="Enter"&&c()},S=k=>r(0,t.alias=t.alias.filter((z,q)=>q!==k),t);function T(k){J[k?"unshift":"push"](()=>{o=k,r(2,o)})}const M=async function(z){console.log(z.detail);const q=z.detail[0],x=new Uint8Array(await q.arrayBuffer());console.log(x);const me=it(x);let $e=q.name.split(".")[1],ae=`data:image/${{svg:"svg+xml",png:"png"}[$e]};base64,${me}`;r(0,t.logo=ae,t),console.log(ae),o.clearFiles()};function G(k,z){i.$$.not_equal(z.text,k)&&(z.text=k,r(0,t),r(8,n),r(1,a))}function j(k,z){i.$$.not_equal(s[z],k)&&(s[z]=k,r(4,s))}const Y=async k=>{k.key==="Enter"&&u()},W=k=>{r(0,t.locations=t.locations.filter((z,q)=>q!==k),t)};function Z(k){i.$$.not_equal(t.categories,k)&&(t.categories=k,r(0,t),r(8,n),r(1,a))}function X(){t.portalInherit.website=this.checked,r(0,t),r(8,n),r(1,a)}function le(k){i.$$.not_equal(t.portal.website,k)&&(t.portal.website=k,r(0,t),r(8,n),r(1,a))}function _(){t.portalInherit.name=this.checked,r(0,t),r(8,n),r(1,a)}function v(k){i.$$.not_equal(t.portal.name,k)&&(t.portal.name=k,r(0,t),r(8,n),r(1,a))}function ie(){t.portalInherit.description=this.checked,r(0,t),r(8,n),r(1,a)}function ce(k){i.$$.not_equal(t.portal.description,k)&&(t.portal.description=k,r(0,t),r(8,n),r(1,a))}return i.$$set=k=>{"brand"in k&&r(0,t=k.brand),"brands"in k&&r(8,n=k.brands)},i.$$.update=()=>{i.$$.dirty[0]&259&&(t!=null&&t.parentId&&(r(1,a=!0),r(5,f=n[t.parentId])),t&&!(t!=null&&t.portal)&&(r(0,t.portal={},t),r(0,t.portalInherit={name:a,website:a,description:a},t))),i.$$.dirty[0]&1&&t&&r(0,t.locations=(t.locations||[]).map(k=>{let z=k.text,q=z.match(/^((.*?),\s+)?((.+?),?\s+)?([A-z][A-z]),?\s*?([\d-]{5,})?$/);if(!q){let x=z.match(/^[A-z][A-z]$/);return console.log("ParsedState",x,`|${z}|`),x?{text:z,state:x[0]}:{text:z}}return{text:z,line:q[2]&&q[4]?[q[2]]:void 0,city:q[4]||q[2],state:q[5],postalCode:q[6]}}),t)},[t,a,o,l,s,f,c,u,n,m,p,$,b,R,S,T,M,G,j,Y,W,Z,X,le,_,v,ie,ce]}class zt extends we{constructor(e){super();ve(this,e,St,Ct,ge,{brand:0,brands:8},null,[-1,-1])}}function Rt(){let i=null;return(e,r)=>{i&&clearInterval(i),i=setTimeout(e,r)}}function Fe(i){try{return new URL(i).origin.replace(/^https:\/\/www\./,"https://")}catch{return}}const Vt="https://example.org/fhir";function Lt(i){let e=i.match(/(https:\/\/.+)\/[^/]+\/[^/]+/);return e?e[1]:Vt}function qt(i){var e,r;return`${(e=i==null?void 0:i.line)!=null&&e.length?i.line.join(" ")+" ":""}${i.city?i.city+", ":""}${i.state?i.state+" ":""}${(r=i.postalCode)!=null?r:""}`.trim()}function Mt(i){var a,f,c,u,m;const e={id:i.id,parentId:(a=i==null?void 0:i.partOf)!=null&&a.reference?i.partOf.reference.split("Organization/")[1]:void 0,name:i.name,alias:i.alias,categories:(i.type||[]).map(p=>p.coding[0].code),locations:i.address.map(p=>_e(fe({},p),{text:qt(p)})),portal:{},portalInherit:{name:!1,description:!1,website:!1}},r=i.extension.filter(p=>p.url==="http://hl7.org/fhir/StructureDefinition/organization-brand").flatMap(p=>p.extension.filter($=>$.url==="brandLogo"));r.length>0&&(e.logo=r[0].valueUrl);const t=((f=i.extension.find(p=>p.url==="http://hl7.org/fhir/StructureDefinition/organization-portal"))==null?void 0:f.extension)||[],n=t.filter(p=>p.url==="portalName");n.length>0&&(e.portal.name=n[0].valueString);const o=t.filter(p=>p.url==="portalDescription");o.length>0&&(e.portal.description=o[0].valueMarkdown);const l=t.filter(p=>p.url==="portalUrl");l.length>0&&(e.portal.website=l[0].valueUrl),e.parentId&&((c=e==null?void 0:e.portal)!=null&&c.name||(e.portalInherit.name=!0),(u=e==null?void 0:e.portal)!=null&&u.description||(e.portalInherit.description=!0),(m=e==null?void 0:e.portal)!=null&&m.website||(e.portalInherit.website=!0));const s=i.telecom.filter(p=>p.system==="url");return s.length>0&&(e.website=s[0].value),e}function jt(i,e){const r=i.entry.filter(s=>s.resource.resourceType==="Organization").map(s=>s.resource).filter(s=>{var a;return!e||s.id===e||((a=s==null?void 0:s.partOf)==null?void 0:a.reference.endsWith(e))});console.log("root",e,r);const t=i.entry.map(s=>s.fullUrl).filter(s=>s.startsWith("https://")).map(Lt);let n=at.uniq(t);n.length>1&&(console.log("Can't determine base URL",n),n=[]);const o=n[0];console.log("base",o);const l=r.map(s=>Mt(s));return{baseUrl:o,brands:Object.fromEntries(l.map(s=>[s.id,s]))}}function Ft(i,e,r){var l,s,a,f,c,u,m,p,$,b,R,S;const t=i[e],n=i[t.parentId],o={fullUrl:`${r}/Organization/${e}`,resource:{resourceType:"Organization",id:e,extension:[...t!=null&&t.logo?[{url:"http://hl7.org/fhir/StructureDefinition/organization-brand",extension:[{url:"brandLogo",valueUrl:t.logo}]}]:[],...(t==null?void 0:t.portalInherit.website)||(t==null?void 0:t.portal.website)?[{url:"http://hl7.org/fhir/StructureDefinition/organization-portal",extension:[...((l=t==null?void 0:t.portal)==null?void 0:l.website)||((s=n==null?void 0:n.portal)==null?void 0:s.website)?[{url:"portalUrl",valueUrl:((a=t==null?void 0:t.portal)==null?void 0:a.website)||((f=n==null?void 0:n.portal)==null?void 0:f.website)}]:[],...((c=t==null?void 0:t.portal)==null?void 0:c.description)||((u=n==null?void 0:n.portal)==null?void 0:u.description)?[{url:"portalDescription",valueMarkdown:((m=t==null?void 0:t.portal)==null?void 0:m.description)||((p=n==null?void 0:n.portal)==null?void 0:p.description)}]:[],...(($=t==null?void 0:t.portal)==null?void 0:$.name)||((b=n==null?void 0:n.portal)==null?void 0:b.name)?[{url:"portalName",valueString:((R=t==null?void 0:t.portal)==null?void 0:R.name)||((S=n==null?void 0:n.portal)==null?void 0:S.name)}]:[]]}]:[]],name:t.name,partOf:t.parentId?{reference:`Organization/${t.parentId}`}:void 0,alias:t.alias,address:(t.locations||[]).map(T=>({line:T==null?void 0:T.line,city:T==null?void 0:T.city,state:T==null?void 0:T.state,postalCode:T==null?void 0:T.postalCode})),telecom:[{system:"url",value:t.website}],identifier:[...Fe(t==null?void 0:t.website)?[{system:"urn:ietf:rfc:3986",value:Fe(t==null?void 0:t.website)}]:[]],type:((t==null?void 0:t.categories)||[]).map(T=>({coding:[{system:"http://terminology.hl7.org/CodeSystem/organization-type",code:T}]}))}};return["alias","address","extension","identifier","type"].forEach(T=>{var M,G;((G=(M=o==null?void 0:o.resource)==null?void 0:M[T])==null?void 0:G.length)===0&&delete o.resource[T]}),o}function Gt(i,e){return{resourceType:"Bundle",type:"collection",timestamp:new Date().toISOString(),entry:Object.entries(i).map(([r,t])=>Ft(i,r,e))}}function Ge(i,e,r){const t=i.slice();return t[10]=e[r][0],t[11]=e[r][1],t}function Ht(i){let e,r,t,n,o;return{c(){e=P("h1"),r=N("SMART Patient Access: Brand Editor ("),t=P("a"),n=N("?"),o=N(")"),this.h()},l(l){e=C(l,"H1",{class:!0});var s=L(e);r=O(s,"SMART Patient Access: Brand Editor ("),t=C(s,"A",{target:!0,href:!0});var a=L(t);n=O(a,"?"),a.forEach(d),o=O(s,")"),s.forEach(d),this.h()},h(){V(t,"target","_blank"),V(t,"href","https://hackmd.io/@argonaut/patient-access-brands"),V(e,"class","svelte-1ggurck")},m(l,s){g(l,e,s),E(e,r),E(e,t),E(t,n),E(e,o)},d(l){l&&d(e)}}}function Wt(i){let e,r;return e=new pe({props:{sm:4,$$slots:{default:[Ht]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&16384&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Jt(i){let e,r,t;return e=new vt({props:{brand:i[11],parentBrand:i[0][i[11].parentId]}}),e.$on("add-affiliated-brand",function(){Ae(i[3](i[10]))&&i[3](i[10]).apply(this,arguments)}),e.$on("remove-affiliated-brand",function(){Ae(i[4](i[10]))&&i[4](i[10]).apply(this,arguments)}),{c(){I(e.$$.fragment),r=D()},l(n){y(e.$$.fragment,n),r=A(n)},m(n,o){B(e,n,o),g(n,r,o),t=!0},p(n,o){i=n;const l={};o&1&&(l.brand=i[11]),o&1&&(l.parentBrand=i[0][i[11].parentId]),e.$set(l)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){U(e,n),n&&d(r)}}}function He(i){let e,r;return e=new pe({props:{class:"tile-column",sm:4,$$slots:{default:[Jt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&16385&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Kt(i){let e,r,t=Object.entries(i[0]),n=[];for(let l=0;l<t.length;l+=1)n[l]=He(Ge(i,t,l));const o=l=>w(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=H()},l(l){for(let s=0;s<n.length;s+=1)n[s].l(l);e=H()},m(l,s){for(let a=0;a<n.length;a+=1)n[a].m(l,s);g(l,e,s),r=!0},p(l,s){if(s&25){t=Object.entries(l[0]);let a;for(a=0;a<t.length;a+=1){const f=Ge(l,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=He(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);re()}},i(l){if(!r){for(let s=0;s<t.length;s+=1)h(n[s]);r=!0}},o(l){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);r=!1},d(l){ye(n,l),l&&d(e)}}}function Qt(i){let e,r;return e=new he({props:{$$slots:{default:[Kt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&16385&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Xt(i){let e,r;return e=new ke({props:{noGutter:!0,$$slots:{default:[Qt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,n){const o={};n&16385&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function We(i){let e,r,t;function n(l){i[6](l)}let o={brands:i[0]};return i[0][i[2].id]!==void 0&&(o.brand=i[0][i[2].id]),e=new zt({props:o}),J.push(()=>K(e,"brand",n)),{c(){I(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){B(e,l,s),t=!0},p(l,s){const a={};s&1&&(a.brands=l[0]),!r&&s&5&&(r=!0,a.brand=l[0][l[2].id],Q(()=>r=!1)),e.$set(a)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Yt(i){let e=i[2].id,r,t,n=We(i);return{c(){n.c(),r=H()},l(o){n.l(o),r=H()},m(o,l){n.m(o,l),g(o,r,l),t=!0},p(o,l){l&4&&ge(e,e=o[2].id)?(te(),w(n,1,1,ut),re(),n=We(o),n.c(),h(n),n.m(r.parentNode,r)):n.p(o,l)},i(o){t||(h(n),t=!0)},o(o){w(n),t=!1},d(o){o&&d(r),n.d(o)}}}function Zt(i){let e,r,t,n,o;return n=new pt({props:{style:"position: absolute; top: 0px; right: 1rem;",text:i[1],feedback:"Copied Brand Bundle to clipboard"}}),{c(){e=P("pre"),r=N(i[1]),t=D(),I(n.$$.fragment),this.h()},l(l){e=C(l,"PRE",{style:!0});var s=L(e);r=O(s,i[1]),s.forEach(d),t=A(l),y(n.$$.fragment,l),this.h()},h(){F(e,"overflow-x","clip"),F(e,"margin-bottom","1em")},m(l,s){g(l,e,s),E(e,r),g(l,t,s),B(n,l,s),o=!0},p(l,s){(!o||s&2)&&ne(r,l[1]);const a={};s&2&&(a.text=l[1]),n.$set(a)},i(l){o||(h(n.$$.fragment,l),o=!0)},o(l){w(n.$$.fragment,l),o=!1},d(l){l&&d(e),l&&d(t),U(n,l)}}}function xt(i){let e,r,t,n,o,l;return e=new pe({props:{lg:4,sm:4,style:"margin-bottom: 1em;",$$slots:{default:[Xt]},$$scope:{ctx:i}}}),t=new pe({props:{lg:8,sm:4,$$slots:{default:[Yt]},$$scope:{ctx:i}}}),o=new pe({props:{style:"position: relative;",lg:4,sm:4,$$slots:{default:[Zt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment),r=D(),I(t.$$.fragment),n=D(),I(o.$$.fragment)},l(s){y(e.$$.fragment,s),r=A(s),y(t.$$.fragment,s),n=A(s),y(o.$$.fragment,s)},m(s,a){B(e,s,a),g(s,r,a),B(t,s,a),g(s,n,a),B(o,s,a),l=!0},p(s,a){const f={};a&16385&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&16389&&(c.$$scope={dirty:a,ctx:s}),t.$set(c);const u={};a&16386&&(u.$$scope={dirty:a,ctx:s}),o.$set(u)},i(s){l||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(o.$$.fragment,s),l=!0)},o(s){w(e.$$.fragment,s),w(t.$$.fragment,s),w(o.$$.fragment,s),l=!1},d(s){U(e,s),s&&d(r),U(t,s),s&&d(n),U(o,s)}}}function er(i){let e,r,t,n;return e=new he({props:{$$slots:{default:[Wt]},$$scope:{ctx:i}}}),t=new he({props:{$$slots:{default:[xt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment),r=D(),I(t.$$.fragment)},l(o){y(e.$$.fragment,o),r=A(o),y(t.$$.fragment,o)},m(o,l){B(e,o,l),g(o,r,l),B(t,o,l),n=!0},p(o,l){const s={};l&16384&&(s.$$scope={dirty:l,ctx:o}),e.$set(s);const a={};l&16391&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),w(t.$$.fragment,o),n=!1},d(o){U(e,o),o&&d(r),U(t,o)}}}function tr(i){let e,r;return e=new ke({props:{$$slots:{default:[er]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){B(e,t,n),r=!0},p(t,[n]){const o={};n&16391&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}const rr="https://ehr.example.org";function nr(i,e,r){let t;Je(i,se,p=>r(2,t=p));let n={id:De(),name:"TODO: Add a name"},o={},l=rr;ft(async()=>{const p=new URLSearchParams(window.location.search),$=p.get("base"),b=p.get("source"),R=p.get("root");if($&&r(5,l=$),b){let S=await fetch(b).then(M=>M.json()),T=jt(S,R);r(5,l=T.baseUrl),r(0,o=T.brands)}else r(0,o={[n.id]:fe({},n)});s()});function s(){let p=Object.values(o);p.length!==0&&(p.length===1?ue(se,t={id:p[0].id},t):ue(se,t={id:p.filter($=>!$.parentId)[0].id},t))}let a="",f=Rt();function c(p){return $=>{const b=_e(fe({},n),{id:De(),parentId:p});r(0,o=_e(fe({},o),{[b.id]:b})),ue(se,t={id:b.id},t)}}function u(p){return $=>{r(0,o=Object.fromEntries(Object.entries(o).filter(([b,R])=>b!==p)))}}function m(p){i.$$.not_equal(o[t.id],p)&&(o[t.id]=p,r(0,o))}return i.$$.update=()=>{i.$$.dirty&33&&f(()=>{r(1,a=JSON.stringify(Gt(o,l||"https://ehr.example.org"),null,2))},200)},[o,a,t,c,u,l,m]}class sr extends we{constructor(e){super();ve(this,e,nr,tr,ge,{})}}export{sr as default};
